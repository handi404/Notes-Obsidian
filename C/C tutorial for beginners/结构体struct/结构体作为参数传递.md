## C语言中结构体作为参数传递

### 为什么使用结构体作为参数？

- **封装数据:** 结构体可以将一组相关的数据封装在一起，作为一个整体传递给函数，提高代码的可读性和维护性。
- **提高效率:** 当需要传递多个相关变量时，使用结构体可以减少函数参数的数量，提高函数调用的效率。
- **传递复杂数据:** 结构体可以表示复杂的数据类型，如学生信息、商品信息等，方便函数对这些数据进行处理。

### 传递方式

主要有三种方式：

1. **值传递:**
    - 将结构体的副本传递给函数。
    - 函数内对结构体的修改不会影响原结构体。
    - 适用于结构体较小的情况，否则会造成额外的内存开销和复制时间。
2. **指针传递:**
    - 将结构体的地址传递给函数。
    - 函数内通过指针可以修改原结构体。
    - 适用于结构体较大或需要修改原结构体的情况。
3. **引用传递:**
    - C++ 中支持引用传递，C 语言中可以通过指针模拟。
    - 引用传递本质上是别名，函数对引用参数的修改会直接影响原变量。

### 代码示例

```C
#include <stdio.h>

struct Student {
    char name[20];
    int age;
    float score;
};

// 值传递
void printStudent1(struct Student s) {
    printf("Name: %s, Age: %d, Score: %.2f\n", s.name, s.age, s.score);
}

// 指针传递
void printStudent2(struct Student *s) {
    printf("Name: %s, Age: %d, Score: %.2f\n", s->name, s->age, s->score);
}

int main() {
    struct Student stu = {"Alice", 20, 90.5};

    printStudent1(stu); // 值传递
    printStudent2(&stu); // 指针传递

    return 0;
}
```

### 注意事项

- **指针传递时注意空指针:** 传递指针时，一定要确保指针指向有效的内存地址，否则会引发段错误。
- **结构体大小:** 如果结构体过大，频繁的复制会影响性能。
- **函数返回值:** 函数可以返回结构体，但通常返回结构体的指针或引用更常见，可以避免额外的复制。
- **C++中的引用:** C++ 中的引用提供了一种更简洁的传递结构体的方式。

### 选择哪种方式？

- **结构体大小:** 如果结构体较小，值传递比较方便。
- **是否需要修改原结构体:** 如果需要修改原结构体，必须使用指针或引用传递。
- **函数返回值:** 如果函数需要返回结构体，通常返回指针或引用。

**一般情况下，为了提高效率和灵活性，建议使用指针传递或引用传递。**

### 总结

结构体作为参数传递是C语言中常用的技术，通过合理选择传递方式，可以提高代码的效率和可读性。