专门聊聊 Nuxt 3 中的**动态路由 (Dynamic Routes)**，这实际上就是你提到的**路由参数 (Route Parameters)** 的实现方式。

当你需要创建一些 URL 结构相似但内容不同的页面时（比如用户详情页、文章页、产品页），动态路由就派上用场了。你不必为每个用户或每篇文章手动创建一个单独的 `.vue` 文件。

**核心机制：方括号 `[]` 文件名约定**

Nuxt 再次利用了其强大的**文件系统路由**约定：

*   在 `pages/` 目录下，如果你想让 URL 的某一部分是**可变的（动态的）**，你需要用**方括号 `[]`** 包裹一个参数名来命名你的 `.vue` 文件或目录。

**如何创建动态路由：**

1.  **基本动态路由：**
    *   **场景**：你想为每个用户创建一个个人资料页，URL 类似 `/users/1`, `/users/alice`, `/users/profile-123`。
    *   **文件结构**：在 `pages/` 目录下创建一个名为 `users` 的文件夹，然后在 `users` 文件夹内创建一个名为 `[id].vue` 的文件。
        ```
        pages/
        └── users/
            └── [id].vue  <-- 这个 [id] 就是动态参数
        ```
    *   **匹配的 URL**：`/users/xxx` （其中 `xxx` 可以是任何非空字符串，比如 `1`, `alice`, `profile-123`）。
    *   **参数名**：在这个例子中，参数名是 `id`（由方括号内的文本决定）。

2.  **嵌套动态路由：**
    *   **场景**：你想展示某个用户组（比如 `admins`）下的特定用户（比如 `john`），URL 类似 `/groups/admins/users/john`。
    *   **文件结构**：
        ```
        pages/
        └── groups/
            └── [groupName]/
                └── users/
                    └── [userName].vue <-- 两个动态参数
        ```
    *   **匹配的 URL**：`/groups/somegroup/users/someuser`。
    *   **参数名**：`groupName` 和 `userName`。

**如何在页面组件中访问路由参数：**

一旦用户访问了匹配动态路由的 URL（例如 `/users/123`），你需要在对应的组件 (`pages/users/[id].vue`) 中获取这个动态部分的值（`123`）。Nuxt 3（基于 Vue Router 4）推荐使用 Composition API 中的 `useRoute` 组合式函数：

```vue
<!-- pages/users/[id].vue -->
<template>
  <div>
    <h1>用户资料</h1>
    <p>正在查看用户 ID: {{ userId }}</p>
    <!-- 你可以在这里根据 userId 获取并显示用户数据 -->
    <div v-if="userData">
      <p>姓名: {{ userData.name }}</p>
      <p>邮箱: {{ userData.email }}</p>
    </div>
    <div v-else-if="pending">
      加载中...
    </div>
    <div v-else-if="error">
      加载用户数据失败: {{ error.message }}
    </div>
  </div>
</template>

<script setup>
import { useRoute } from 'vue-router'; // 或 Nuxt 自动导入: import { useRoute } from '#imports';
import { ref, watch } from 'vue'; // 或 #imports

const route = useRoute();

// 访问名为 'id' 的参数 (与文件名 [id].vue 对应)
// route.params 是一个包含所有路由参数的对象
const userId = ref(route.params.id);

// --- 示例：根据 userId 获取数据 ---
// 推荐使用 Nuxt 的 useFetch 或 useAsyncData 来处理数据获取
// useFetch 会自动响应 route.params 的变化，无需手动 watch
const { data: userData, pending, error } = await useFetch(() => `/api/users/${userId.value}`);

// 如果你需要更复杂的逻辑或不使用 useFetch 的自动响应，
// 你可能需要 watch 参数的变化（例如，用户在同一页面组件内导航到不同 ID）
// watch(() => route.params.id, (newId) => {
//   userId.value = newId;
//   // 手动重新获取数据... (如果未使用 useFetch/useAsyncData 的响应式 key)
//   console.log('路由参数 id 变化为:', newId);
// });

// --- 旧的/Options API 方式 (不推荐在 Nuxt 3 Composition API 中主要使用) ---
// export default {
//   computed: {
//     userId() {
//       return this.$route.params.id;
//     }
//   },
//   // ...
// }
</script>

<style scoped>
/* 页面样式 */
</style>
```

**关键点：**

*   `useRoute()`：获取当前路由信息的响应式对象。
*   `route.params`：一个包含所有从 URL 中解析出来的动态参数的对象。
*   `route.params.id`：访问名为 `id` 的参数值（对应 `[id].vue`）。如果文件是 `[slug].vue`，则访问 `route.params.slug`。参数值**总是字符串类型**。

**高级动态路由：**

1.  **捕获所有 (Catch-all) 路由：**
    *   **场景**：你想匹配某个基础路径下的所有层级的子路径，常用于文档、文件浏览器等。
    *   **文件结构**：使用带有三个点的方括号 `[...]`。
        ```
        pages/
        └── docs/
            └── [...slug].vue
        ```
    *   **匹配的 URL**：`/docs/a`, `/docs/a/b`, `/docs/a/b/c` 等都会匹配。
    *   **访问参数**：`route.params.slug` 会是一个**数组**，包含所有匹配的路径段。
        *   访问 `/docs/getting-started/installation` 时，`route.params.slug` 是 `['getting-started', 'installation']`。
        *   访问 `/docs/introduction` 时，`route.params.slug` 是 `['introduction']`。

    ```vue
    <!-- pages/docs/[...slug].vue -->
    <template>
      <h1>文档页面</h1>
      <p>路径参数 (数组): {{ slugArray }}</p>
      <p>完整路径: /docs/{{ slugArray.join('/') }}</p>
    </template>

    <script setup>
    import { useRoute } from '#imports';
    const route = useRoute();
    const slugArray = route.params.slug; // 这是一个数组
    </script>
    ```

2.  **可选参数 (Optional Parameters)：** (较少见，但可能有用)
    *   **场景**：某个参数是可选的。
    *   **文件结构**：使用双层方括号 `[[...]]`。
        ```
        pages/
        └── users/
            └── [[group]].vue
        ```
    *   **匹配的 URL**：`/users` 和 `/users/admins` 都会匹配。
    *   **访问参数**：如果 URL 是 `/users/admins`，`route.params.group` 是 `'admins'`。如果 URL 是 `/users`，`route.params.group` 是 `undefined`。

**导航到动态路由：**

使用 `<NuxtLink>` 时，可以通过 `:to` 属性传递对象来指定参数：

```vue
<template>
  <nav>
    <ul>
      <li><NuxtLink :to="{ name: 'users-id', params: { id: '1' } }">用户 1</NuxtLink></li>
      <li><NuxtLink :to="{ name: 'users-id', params: { id: 'alice' } }">用户 Alice</NuxtLink></li>
      <li>
        <NuxtLink :to="{ name: 'groups-groupName-users-userName', params: { groupName: 'devs', userName: 'bob' } }">
          开发组的 Bob
        </NuxtLink>
      </li>
      <li>
        <NuxtLink :to="{ name: 'docs-slug', params: { slug: ['guides', 'getting-started'] } }">
            文档：入门指南
        </NuxtLink>
        <!-- 或者直接用字符串，但不推荐用于复杂参数 -->
        <NuxtLink to="/docs/guides/getting-started">文档：入门指南 (字符串)</NuxtLink>
      </li>
    </ul>
  </nav>
</template>

<script setup>
// Nuxt 会根据你的文件结构自动生成路由名称 (name)
// 例如 pages/users/[id].vue -> name: 'users-id'
// 例如 pages/groups/[groupName]/users/[userName].vue -> name: 'groups-groupName-users-userName'
// 例如 pages/docs/[...slug].vue -> name: 'docs-slug'
</script>
```

**总结：**

动态路由是 Nuxt 基于文件系统路由的核心功能，通过 `[]` 语法实现：

*   用 `[paramName].vue` 创建动态路由段。
*   用 `useRoute().params.paramName` 在组件中访问参数值。
*   用 `[...paramName].vue` 创建捕获所有路由，参数值为数组。
*   使用 `<NuxtLink>` 的 `:to` 对象语法传递参数进行导航。

这使得创建结构化且数据驱动的页面变得非常方便。