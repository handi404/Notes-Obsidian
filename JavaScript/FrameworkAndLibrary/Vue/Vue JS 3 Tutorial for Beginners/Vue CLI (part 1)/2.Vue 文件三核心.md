在 Vue 3 中，组件的开发基于单文件组件 (Single File Components, SFC)，使用 `.vue` 文件来组织组件的模板、脚本和样式。这种方式允许开发者将 HTML、JavaScript 和 CSS 集中在一个文件中，提供了更好的可维护性和模块化开发体验。Vue 3 引入了一些新特性和改进，使得单文件组件更加简洁和高效。

### Vue 3 单文件组件的结构

一个典型的 Vue 3 单文件组件包括三个核心部分：
- `<template>`：定义组件的 HTML 结构（视图）。
- `<script>`：包含组件的逻辑，如数据、方法、生命周期钩子等。
- `<style>`：定义组件的样式，样式可以是全局的或作用域内的。

这三个部分通常位于同一个 `.vue` 文件中，每个部分的作用如下：

#### **1. `<template>`：定义组件模板**

`<template>` 部分负责定义组件的 HTML 结构，即视图层。模板中可以使用 Vue 的模板语法，如插值表达式、指令（如 `v-if`、`v-for`）和事件绑定。

示例：
```vue
<template>
  <div>
    <h1>{{ title }}</h1>
    <p v-if="showMessage">{{ message }}</p>
    <ul>
      <li v-for="(item, index) in items" :key="index">{{ item }}</li>
    </ul>
    <button @click="toggleMessage">Toggle Message</button>
  </div>
</template>
```

- **插值表达式**：`{{ title }}` 会在渲染时输出 `title` 的值。
- **条件渲染**：`v-if` 指令用于根据 `showMessage` 的值显示或隐藏元素。
- **列表渲染**：`v-for` 指令用于遍历数组 `items`，并动态生成列表项。
- **事件绑定**：`@click="toggleMessage"` 绑定了点击事件，触发 `toggleMessage` 方法。

#### **2. `<script>`：定义组件逻辑**

`<script>` 部分负责定义组件的逻辑，包括数据、方法、计算属性、生命周期钩子等。Vue 3 支持两种编写组件逻辑的方式：传统的 `Options API` 和新的 `Composition API`。

##### **Options API 示例**（传统方式）：

```vue
<script>
export default {
  data() {
    return {
      title: 'Vue 3 Component',
      message: 'Hello, Vue!',
      showMessage: true,
      items: ['Item 1', 'Item 2', 'Item 3']
    };
  },
  methods: {
    toggleMessage() {
      this.showMessage = !this.showMessage;
    }
  }
};
</script>
```

- **`data`**：定义组件的数据。
- **`methods`**：定义组件的方法。
- **`this`**：在 `Options API` 中，访问组件的属性和方法时使用 `this`。

##### **Composition API 示例**（新方式，推荐在 Vue 3 中使用）：

```vue
<script setup>
import { ref } from 'vue';

const title = ref('Vue 3 Component');
const message = ref('Hello, Vue!');
const showMessage = ref(true);
const items = ref(['Item 1', 'Item 2', 'Item 3']);

function toggleMessage() {
  showMessage.value = !showMessage.value;
}
</script>
```

- **`ref`**：Vue 3 提供的响应式 API，`ref` 用来定义响应式的数据。
- **`setup`**：`<script setup>` 是 Vue 3 的语法糖，简化了组件逻辑的定义。

#### **3. `<style>`：定义组件样式**

`<style>` 部分定义组件的样式。可以通过 `scoped` 属性将样式限制在组件的作用范围内，避免全局污染。

##### **示例：全局样式**

```vue
<style>
h1 {
  color: blue;
}
</style>
```

##### **示例：作用域样式**

```vue
<style scoped>
h1 {
  color: red;
}
</style>
```

- **`scoped`**：通过添加 `scoped` 属性，可以将样式限制在当前组件中，防止影响其他组件的样式。

### Vue 3 文件的核心概念

#### **1. 模板语法**

Vue 的模板语法包括：
- **插值**：使用 `{{ }}` 插入变量的值。
- **指令**：如 `v-if`、`v-for`、`v-bind`、`v-model` 等，控制元素的显示、循环、绑定属性和双向绑定。
- **事件处理**：通过 `@` 或 `v-on` 绑定事件处理程序，如 `@click="methodName"`。

##### **模板示例：**
```vue
<template>
  <div>
    <h1>{{ title }}</h1>
    <input v-model="message" placeholder="Enter message">
    <button @click="sendMessage">Send</button>
    <p v-if="message">{{ message }}</p>
  </div>
</template>
```

- **`v-model`**：实现双向数据绑定。
- **`@click`**：事件绑定，当按钮点击时触发 `sendMessage` 方法。

#### **2. 响应式数据**

Vue 3 使用 `reactive` 和 `ref` 来处理响应式数据。`ref` 用于处理基础数据类型，`reactive` 用于处理对象或数组。

##### **示例：使用 `ref` 和 `reactive`**

```vue
<script setup>
import { ref, reactive } from 'vue';

const count = ref(0);  // 基础数据类型
const user = reactive({ name: 'John', age: 30 });  // 对象

function increment() {
  count.value++;
}
</script>

<template>
  <div>
    <p>Count: {{ count }}</p>
    <button @click="increment">Increment</button>
    <p>User: {{ user.name }}, Age: {{ user.age }}</p>
  </div>
</template>
```

- **`count.value`**：访问 `ref` 的值。
- **`reactive`**：处理对象和数组时使用。

#### **3. 模块化和组件复用**

Vue 3 鼓励开发者将应用程序拆分成多个可复用的组件，每个组件都在其自己的 `.vue` 文件中定义。

##### **父子组件通信**

- **Props**：用于从父组件向子组件传递数据。
- **Emit**：用于子组件向父组件发送事件。

##### **示例：父子组件通信**

**父组件：**
```vue
<template>
  <div>
    <ChildComponent :message="parentMessage" @updateMessage="updateMessage"></ChildComponent>
  </div>
</template>

<script>
import ChildComponent from './ChildComponent.vue';

export default {
  data() {
    return {
      parentMessage: 'Hello from Parent'
    };
  },
  methods: {
    updateMessage(newMessage) {
      this.parentMessage = newMessage;
    }
  },
  components: {
    ChildComponent
  }
};
</script>
```

**子组件：**
```vue
<template>
  <div>
    <p>{{ message }}</p>
    <button @click="changeMessage">Change Message</button>
  </div>
</template>

<script>
export default {
  props: ['message'],
  methods: {
    changeMessage() {
      this.$emit('updateMessage', 'Hello from Child');
    }
  }
};
</script>
```

#### **4. 组合式 API 与 `<script setup>`**

Vue 3 引入了组合式 API，让开发者可以更加灵活地组织组件逻辑。通过 `<script setup>`，你可以在顶层直接声明响应式变量和方法，而无需显式的 `setup()` 函数。

##### **示例：组合式 API**

```vue
<script setup>
import { ref } from 'vue';

const count = ref(0);

function increment() {
  count.value++;
}
</script>

<template>
  <div>
    <p>{{ count }}</p>
    <button @click="increment">Increment</button>
  </div>
</template>
```

- `<script setup>` 将组件的逻辑简化，所有的变量和方法可以直接在模板中使用。

### 总结

Vue 3 文件中的三个主要部分（`<template>`、`<script>` 和 `<style>`）让开发者可以清晰、直观地组织组件的结构。使用 Vue 3 的新特性（如组合式 API 和 `<script setup>`）可以让代码更加简洁高效，提高开发体验和性能。

#### 核心要点：
1. **模板部分 `<template>`**：定义组件的视图结构，使用插值表达式和指令控制 DOM。
2. **脚本部分 `<script>` 或 `<script setup>`**：负责组件的逻辑，Vue 3 提供了更简洁的 `Composition API`。
3. **样式部分 `<style>`**：定义组件的样式，支持作用域样式。

这些特

性让 Vue 3 组件开发更加灵活、简洁、高效。