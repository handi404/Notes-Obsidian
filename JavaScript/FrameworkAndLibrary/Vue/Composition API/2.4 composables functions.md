想象一下这种情况，你有一个非常大的应用程序，其中包含大量不同的组件，在应用程序的不同页面和不同部分，你都可能需要使用它，在这种情况下你必须**在需要它的任何组件中重复所有这些代码**，这不是很有效，你不想在不同的地方一遍又一遍地重复你的代码。所以，在 setup函数中使用 Composition API 可以将所有这些逻辑**外部化到自己的文件中的单独函数中**，然后我们只需导入它即可在任何需要数据的组件中运行该函数并调用该组件的设置钩子中的函数。这样，我们*只需要在一个文件中定义一次所有的逻辑，然后在需要的地方导入和使用它，这就是 composables or composition functions（可组合函数）*

基于 2.3
在 src 中创建文件夹 composables，在 composables 中创建我们的外部化的代码的 js 文件
(在外部 js 文件中需要导入的，如 ref 仍需导入)
```js
import { ref } from "vue";

const getPosts = (params) => {
  const posts = ref([]);
  const error = ref(null);
  const load = async () => {
    try {
      const data = await fetch("http://localhost:3000/posts");
      if (!data.ok) {
        throw Error("No data available");
      }
      posts.value = await data.json();
    } catch (er) {
      error.value = er.message;
    }
  };
  return { posts, error, load };
};

export default getPosts;
```

```vue
<template>
  <div class="home">
    <h1>Home</h1>
    <div v-if="error">{{ error }}</div>
    <div v-if="posts.length">
      <PostList :posts="posts" />
    </div>
    <div v-else>loading...</div>
  </div>
</template>

<script>
import { computed, watch, ref, watchEffect } from "vue";
import PostList from "../components/PostList.vue";
import getPosts from "../composables/getPosts";
export default {
  components: {
    PostList,
  },
  setup() {
    const { posts, error, load } = getPosts();
    load();
    return {
      posts,
      error,
    };
  },
};
</script>
<style></style>
```




