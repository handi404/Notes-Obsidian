在 Vue 3 中，计算属性（Computed Properties）是一种特殊的属性，它依赖于其他数据属性的值，并在这些依赖项变化时自动重新计算。计算属性的主要优势在于它们可以用来简化模板逻辑、提高性能和增强可读性。计算属性通常用于需要基于现有数据进行复杂计算的场景。

### 1. **基本用法**
计算属性通过 `computed` 选项定义。计算属性可以是一个 getter 函数，也可以有一个 setter 函数。

#### 示例：
```html
<div id="app">
  <p>原始价格: {{ price }}</p>
  <p>折扣: {{ discount }}%</p>
  <p>折后价格: {{ discountedPrice }}</p>
</div>

<script>
  const app = Vue.createApp({
    data() {
      return {
        price: 100,
        discount: 10
      };
    },
    computed: {
      discountedPrice() {
        return this.price - (this.price * this.discount / 100);
      }
    }
  });

  app.mount('#app');
</script>
```

#### 解释：
- `discountedPrice` 是一个计算属性，依赖于 `price` 和 `discount`。当这两个属性中的任何一个发生变化时，`discountedPrice` 会自动重新计算。

---

### 2. **计算属性的惰性求值**
计算属性是惰性求值的，这意味着它们只有在其依赖项发生变化时才会重新计算。这提高了性能，因为不必要的计算会被避免。

#### 示例：
```html
<div id="app">
  <p>输入: <input v-model="inputText"></p>
  <p>字符长度: {{ textLength }}</p>
</div>

<script>
  const app = Vue.createApp({
    data() {
      return {
        inputText: ''
      };
    },
    computed: {
      textLength() {
        return this.inputText.length;
      }
    }
  });

  app.mount('#app');
</script>
```

#### 解释：
- `textLength` 计算属性计算了输入文本的长度，只有在 `inputText` 变化时才会重新计算。

---

### 3. **计算属性的 setter**
计算属性不仅可以有 getter，还可以有 setter。当你希望在设置计算属性的值时执行某些逻辑时，setter 特别有用。

#### 示例：
```html
<div id="app">
  <p>输入: <input v-model="inputText"></p>
  <p>大写输入: <input v-model="uppercaseText"></p>
</div>

<script>
  const app = Vue.createApp({
    data() {
      return {
        inputText: ''
      };
    },
    computed: {
      uppercaseText: {
        get() {
          return this.inputText.toUpperCase();
        },
        set(value) {
          this.inputText = value.toLowerCase();
        }
      }
    }
  });

  app.mount('#app');
</script>
```

#### 解释：
- `uppercaseText` 计算属性在读取时返回 `inputText` 的大写形式，而在写入时将其转换为小写并更新 `inputText`。

---

### 4. **计算属性 vs 方法**
计算属性与方法在功能上有相似之处，但在性能和用途上有所不同。计算属性在依赖的属性未更改时会被缓存，而方法则会在每次调用时重新计算。

#### 示例对比：
```html
<div id="app">
  <p>输入: <input v-model="inputText"></p>
  <p>计算属性长度: {{ textLength }}</p>
  <p>方法长度: {{ getTextLength() }}</p>
</div>

<script>
  const app = Vue.createApp({
    data() {
      return {
        inputText: ''
      };
    },
    computed: {
      textLength() {
        return this.inputText.length;
      }
    },
    methods: {
      getTextLength() {
        return this.inputText.length;
      }
    }
  });

  app.mount('#app');
</script>
```

#### 解释：
- 在这个例子中，`textLength` 是一个计算属性，而 `getTextLength` 是一个方法。每当 `inputText` 发生变化时，`textLength` 会缓存其值，而 `getTextLength` 则会在每次调用时重新计算。

---

### 5. **使用计算属性进行复杂逻辑**
计算属性可以用于复杂的逻辑处理，使模板更简洁。

#### 示例：
```html
<div id="app">
  <p>姓名: <input v-model="firstName"></p>
  <p>姓氏: <input v-model="lastName"></p>
  <p>全名: {{ fullName }}</p>
</div>

<script>
  const app = Vue.createApp({
    data() {
      return {
        firstName: '',
        lastName: ''
      };
    },
    computed: {
      fullName() {
        return `${this.firstName} ${this.lastName}`.trim();
      }
    }
  });

  app.mount('#app');
</script>
```

#### 解释：
- `fullName` 计算属性将 `firstName` 和 `lastName` 合并成一个全名，模板中使用时非常简洁。

---

### 6. **响应式计算属性**
计算属性是响应式的，当其依赖的数据发生变化时，计算属性会自动更新。这对于实现动态功能非常有用。

#### 示例：
```html
<div id="app">
  <p>选中的颜色: <select v-model="selectedColor">
    <option value="red">红色</option>
    <option value="blue">蓝色</option>
    <option value="green">绿色</option>
  </select></p>
  <p>你选择的颜色是: <span :style="{ color: selectedColor }">{{ selectedColor }}</span></p>
</div>

<script>
  const app = Vue.createApp({
    data() {
      return {
        selectedColor: 'red'
      };
    }
  });

  app.mount('#app');
</script>
```

#### 解释：
- 在这个示例中，`selectedColor` 的值是响应式的，`<span>` 的颜色会根据选择的值自动更新。

---

### 总结
- **定义方式**：使用 `computed` 选项定义计算属性。
- **惰性求值**：计算属性只在依赖的属性发生变化时重新计算。
- **setter 和 getter**：可以定义 setter 来处理属性赋值的逻辑。
- **与方法的区别**：计算属性是基于其依赖项缓存的，而方法每次调用都会重新计算。
- **复杂逻辑处理**：可以用来处理复杂逻辑，简化模板。

计算属性在 Vue 3 中是非常强大的工具，它能够让你的组件逻辑更加清晰、易于管理。通过合理使用计算属性，你可以提高应用的性能和可读性。