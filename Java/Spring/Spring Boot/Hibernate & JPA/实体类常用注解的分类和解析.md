下面按大类对 Hibernate 与 JPA 在实体类中常用的注解进行分类讲解，每个注解说明其用途及主要参数。需要注意的是，JPA 提供的注解属于 Java EE 标准，而 Hibernate 则在此基础上提供了一些扩展。以下介绍主要涵盖常见场景和常用参数。

---

## 一、实体类与表映射注解

### 1.1 @Entity

- **用途**：标记一个 Java 类为实体类，该类的实例会映射到数据库表中的记录。
- **主要参数**：
    - `name`（可选）：指定实体的名称，默认是类名，可在 JPQL 查询中使用。
- **示例**：
    
    ```java
    @Entity(name = "UserEntity")
    public class User { ... }
    ```
    

### 1.2 @Table

- **用途**：指定实体映射的数据库表及其属性。
- **主要参数**：
    - `name`：数据库表名。
    - `catalog`、`schema`：指定目录或模式。
    - `uniqueConstraints`：定义唯一约束，可以对多个列组合指定唯一性。
- **示例**：
    
    ```java
    @Entity
    @Table(name = "users", schema = "public",
           uniqueConstraints = @UniqueConstraint(columnNames = {"email"}))
    public class User { ... }
    ```
    

---

## 二、主键与标识生成注解

### 2.1 @Id

- **用途**：标识实体的主键字段。
- **示例**：
    
    ```java
    @Id
    private Long id;
    ```
    

### 2.2 @GeneratedValue

- **用途**：指定主键生成策略。
- **主要参数**：
    - `strategy`：生成策略，常见值有
        - `GenerationType.AUTO`：由 JPA 自动选择。
        - `GenerationType.IDENTITY`：使用数据库自增字段。
        - `GenerationType.SEQUENCE`：使用数据库序列（需配合 @SequenceGenerator）。
        - `GenerationType.TABLE`：使用一个特定的数据库表保存主键值。
    - `generator`：生成器名称，当使用自定义生成器或序列时需要指定。
- **示例**：
    
    ```java
    @Id
    @GeneratedValue(strategy = GenerationType.IDENTITY)
    private Long id;
    ```
    

### 2.3 @SequenceGenerator

- **用途**：当使用序列生成策略时，定义序列生成器。
- **主要参数**：
    - `name`：生成器名称，与 @GeneratedValue 的 generator 属性对应。
    - `sequenceName`：数据库中序列的名称。
    - `allocationSize`：每次序列值增长的数值，默认为 50，可用于减少访问数据库的频率。
    - `initialValue`：序列初始值。
- **示例**：
    
    ```java
    @Id
    @GeneratedValue(strategy = GenerationType.SEQUENCE, generator = "user_seq")
    @SequenceGenerator(name = "user_seq", sequenceName = "user_sequence", allocationSize = 1)
    private Long id;
    ```
    

### 2.4 Hibernate 扩展 @GenericGenerator

- **用途**：Hibernate 提供的自定义标识生成器，可以生成 UUID 等特殊类型的主键。
- **主要参数**：
    - `name`：生成器名称。
    - `strategy`：生成策略，如 `"uuid2"` 生成符合标准 UUID 格式的字符串。
- **示例**：
    
    ```java
    @Id
    @GeneratedValue(generator = "uuid")
    @GenericGenerator(name = "uuid", strategy = "uuid2")
    @Column(updatable = false, nullable = false)
    private String id;
    ```
    

---

## 三、字段映射注解

### 3.1 @Column

- **用途**：映射实体属性到数据库表中的列，并定义列的属性。
- **主要参数**：
    - `name`：列名，默认采用属性名。
    - `nullable`：是否允许 NULL 值（默认 true）。
    - `unique`：是否唯一。
    - `length`：用于字符串，指定列长度。
    - `precision` 和 `scale`：用于数值，分别指定精度和小数位数。
- **示例**：
    
    ```java
    @Column(name = "user_name", nullable = false, length = 50)
    private String name;
    ```
    

### 3.2 @Basic

- **用途**：定义一个简单属性的映射，可指定是否延迟加载。
- **主要参数**：
    - `fetch`：指定加载策略，取值为 `FetchType.EAGER`（默认）或 `FetchType.LAZY`。
    - `optional`：是否允许值为 null（默认 true）。
- **示例**：
    
    ```java
    @Basic(fetch = FetchType.LAZY, optional = false)
    private String description;
    ```
    

### 3.3 @Temporal

- **用途**：用于 java.util.Date 或 java.util.Calendar 类型，指定映射为日期、时间或时间戳。
- **主要参数**：
    - `value`：枚举类型 TemporalType，有 `DATE`（仅日期）、`TIME`（仅时间）、`TIMESTAMP`（日期和时间）。
- **示例**：
    
    ```java
    @Temporal(TemporalType.DATE)
    private Date birthdate;
    ```
    

### 3.4 @Enumerated

- **用途**：映射枚举类型到数据库。
- **主要参数**：
    - `value`：枚举存储方式，`EnumType.ORDINAL`（默认，按序号存储）或 `EnumType.STRING`（按名称存储）。
- **示例**：
    
    ```java
    @Enumerated(EnumType.STRING)
    private Gender gender;
    ```
    

### 3.5 @Lob

- **用途**：将属性映射为大对象，适用于存储大文本（CLOB）或二进制数据（BLOB）。
- **示例**：
    
    ```java
    @Lob
    private String description;
    ```
    

### 3.6 @Transient

- **用途**：标识该属性不参与持久化，不映射到数据库。
- **示例**：
    
    ```java
    @Transient
    private int tempValue;
    ```
    

### 3.7 @Version

- **用途**：用于实现乐观锁控制，每次更新时自动递增，防止并发冲突。
- **示例**：
    
    ```java
    @Version
    private Integer version;
    ```
    

---

## 四、关系映射注解

### 4.1 @OneToOne

- **用途**：定义一对一关联关系。
- **主要参数**：
    - `fetch`：加载策略（LAZY 或 EAGER）。
    - `cascade`：级联操作，如 `CascadeType.ALL`。
    - `mappedBy`：指定关联方，表示双向关系中被维护的一方。
- **示例**：
    
    ```java
    @OneToOne(cascade = CascadeType.ALL, fetch = FetchType.LAZY)
    @JoinColumn(name = "profile_id")
    private Profile profile;
    ```
    

### 4.2 @OneToMany

- **用途**：定义一对多关联关系。
- **主要参数**：
    - `mappedBy`：指明关系由对方实体维护。
    - `cascade` 和 `fetch`：同上。
- **示例**：
    
    ```java
    @OneToMany(mappedBy = "user", cascade = CascadeType.ALL, fetch = FetchType.LAZY)
    private List<Order> orders;
    ```
    

### 4.3 @ManyToOne

- **用途**：定义多对一关联关系（通常为外键关系）。
- **主要参数**：
    - `fetch`：加载策略（默认 EAGER，一般建议 LAZY）。
    - `cascade`：级联操作。
- **示例**：
    
    ```java
    @ManyToOne(fetch = FetchType.LAZY)
    @JoinColumn(name = "department_id")
    private Department department;
    ```
    

### 4.4 @ManyToMany

- **用途**：定义多对多关联关系，通常需要使用中间表。
- **主要参数**：
    - `fetch` 和 `cascade` 同上。
    - 需要配合 @JoinTable 指定中间表信息。
- **示例**：
    
    ```java
    @ManyToMany(fetch = FetchType.LAZY)
    @JoinTable(name = "user_role",
        joinColumns = @JoinColumn(name = "user_id"),
        inverseJoinColumns = @JoinColumn(name = "role_id"))
    private Set<Role> roles;
    ```
    

### 4.5 @JoinColumn

- **用途**：用于定义关联关系中外键所在的列。
- **主要参数**：
    - `name`：当前表中的外键列名。
    - `referencedColumnName`：目标实体对应的主键列名，默认为目标实体的主键。
    - `nullable`、`insertable`、`updatable`：控制列的可空性与更新插入行为。
- **示例**：见 @ManyToOne 示例。

### 4.6 @JoinTable

- **用途**：用于多对多关系或需要中间表的场景，定义中间表名称及外键映射。
- **主要参数**：
    - `name`：中间表名。
    - `joinColumns`：当前实体对应的外键映射。
    - `inverseJoinColumns`：关联实体对应的外键映射。
- **示例**：见 @ManyToMany 示例。

---

## 五、嵌入对象映射注解

### 5.1 @Embeddable

- **用途**：标记一个类为可嵌入的值对象，该对象的属性将被嵌入到拥有该属性的实体表中。
- **示例**：
    
    ```java
    @Embeddable
    public class Address {
        private String street;
        private String city;
        // getter/setter...
    }
    ```
    

### 5.2 @Embedded

- **用途**：在实体中嵌入一个 @Embeddable 类的实例。
- **示例**：
    
    ```java
    @Embedded
    private Address address;
    ```
    

### 5.3 @AttributeOverride / @AttributeOverrides

- **用途**：在嵌入对象中重写属性对应的列映射。
- **主要参数**：
    - `name`：嵌入对象中属性的名称。
    - `column`：新的列映射定义（可在 @Column 中设置属性）。
- **示例**：
    
    ```java
    @Embedded
    @AttributeOverride(name = "city", column = @Column(name = "home_city"))
    private Address address;
    ```
    

---

## 六、集合映射注解

### 6.1 @ElementCollection

- **用途**：用于映射基本类型或嵌入对象的集合，不需要单独定义实体。
- **示例**：
    
    ```java
    @ElementCollection
    @CollectionTable(name = "user_tags", joinColumns = @JoinColumn(name = "user_id"))
    @Column(name = "tag")
    private Set<String> tags;
    ```
    

### 6.2 @CollectionTable

- **用途**：与 @ElementCollection 配合使用，指定存储集合元素的表信息。
- **主要参数**：
    - `name`：集合表名称。
    - `joinColumns`：定义与主表的关联外键。
- **示例**：见 @ElementCollection 示例。

### 6.3 @OrderColumn

- **用途**：在有序集合中指定顺序列，使得集合中的元素有固定顺序。
- **主要参数**：
    - `name`：排序列的名称。
- **示例**：
    
    ```java
    @OneToMany
    @OrderColumn(name = "order_index")
    private List<Item> items;
    ```
    

---

## 七、其他辅助与查询相关注解

### 7.1 @NamedQuery / @NamedQueries

- **用途**：预定义 JPQL 查询，在运行时可以通过名称调用。
- **主要参数**：
    - `name`：查询名称。
    - `query`：查询语句。
- **示例**：
    
    ```java
    @NamedQuery(name = "User.findByName", query = "SELECT u FROM User u WHERE u.name = :name")
    @Entity
    public class User { ... }
    ```
    

### 7.2 @NamedNativeQuery

- **用途**：预定义原生 SQL 查询。
- **主要参数**：
    - `name`：查询名称。
    - `query`：原生 SQL 语句。
    - `resultClass`：查询结果映射的实体类型。
- **示例**：
    
    ```java
    @NamedNativeQuery(name = "User.findByStatus", 
        query = "SELECT * FROM users WHERE status = ?", resultClass = User.class)
    ```
    

### 7.3 Hibernate 扩展注解（如 @DynamicInsert、@DynamicUpdate）

- **用途**：用于优化 SQL 生成，
    - **@DynamicInsert**：仅对非 null 字段生成 INSERT 语句。
    - **@DynamicUpdate**：仅更新实际修改的字段。
- **示例**：
    
    ```java
    @Entity
    @DynamicInsert
    @DynamicUpdate
    public class User { ... }
    ```
    

---

## 总结

以上就是 Hibernate 与 JPA 实体类中常见注解的分类及详细讲解。

- **实体映射注解**（@Entity、@Table）用于标识实体及其对应表信息；
- **主键及生成策略注解**（@Id、@GeneratedValue、@SequenceGenerator、@GenericGenerator）用于定义主键生成规则；
- **字段映射注解**（@Column、@Basic、@Temporal、@Enumerated、@Lob、@Transient、@Version）用于细粒度控制属性与数据库列的映射；
- **关系映射注解**（@OneToOne、@OneToMany、@ManyToOne、@ManyToMany、@JoinColumn、@JoinTable）用于定义实体之间的关联；
- **嵌入映射注解**（@Embeddable、@Embedded、@AttributeOverride[s]）用于将复合属性嵌入实体；
- **集合映射注解**（@ElementCollection、@CollectionTable、@OrderColumn）用于映射集合；
- **其他辅助注解**（@NamedQuery、@NamedNativeQuery、Hibernate 扩展注解等）用于预定义查询和优化 SQL。

每个注解中的参数都提供了对映射细节的控制，使开发者能够根据实际业务需求精确地定义实体与数据库之间的关系。希望这份分类讲解能帮助你更全面地理解和使用 Hibernate 与 JPA 注解。

---

以下是 Hibernate & JPA 中实体类常用注解的详细分类和解析，涵盖核心功能和参数说明：

---
# deepseek
## 一、**实体标识注解**
定义实体类与数据库表的关系及主键生成策略。

### 1. `@Entity`
- **作用**：声明类为 JPA 实体，对应数据库表。
- **参数**：
  - `name`：指定实体名称（默认类名），用于 JPQL 查询。

### 2. `@Table`
- **作用**：指定实体映射的数据库表。
- **参数**：
  - `name`：表名（默认类名）。
  - `schema`：数据库模式名。
  - `catalog`：数据库目录名。
  - `uniqueConstraints`：定义唯一约束（如 `@UniqueConstraint(columnNames = {"col1", "col2"})`）。
  - `indexes`：定义索引（需结合 `@Index`）。

```java
@Entity
@Table(name = "users", schema = "public", indexes = @Index(columnList = "email"))
public class User { ... }
```

---

## 二、**主键生成注解**
定义主键生成策略。

### 1. `@Id`
- **作用**：标记字段为实体主键。

### 2. `@GeneratedValue`
- **作用**：指定主键生成策略。
- **参数**：
  - `strategy`：生成策略（`GenerationType.IDENTITY`、`SEQUENCE`、`TABLE`、`AUTO`）。
  - `generator`：引用自定义生成器名称（需配合 `@SequenceGenerator` 或 `@TableGenerator`）。

```java
@Id
@GeneratedValue(strategy = GenerationType.IDENTITY)
private Long id;
```

### 3. `@SequenceGenerator`
- **作用**：配合 `GenerationType.SEQUENCE` 使用，定义数据库序列。
- **参数**：
  - `name`：生成器名称。
  - `sequenceName`：数据库序列名。
  - `initialValue`：初始值（默认 `1`）。
  - `allocationSize`：每次分配大小（默认 `50`）。

```java
@GeneratedValue(strategy = GenerationType.SEQUENCE, generator = "user_seq")
@SequenceGenerator(name = "user_seq", sequenceName = "user_sequence", allocationSize = 1)
```

### 4. `@TableGenerator`
- **作用**：配合 `GenerationType.TABLE` 使用，通过表模拟序列。
- **参数**：
  - `name`：生成器名称。
  - `table`：存储主键的表名。
  - `pkColumnName`：存储主键名的列名。
  - `valueColumnName`：存储主键值的列名。
  - `pkColumnValue`：当前实体主键名。

---

## 三、**字段映射注解**
定义字段与数据库列的映射关系。

### 1. `@Column`
- **作用**：指定字段与数据库列的映射。
- **参数**：
  - `name`：列名（默认字段名）。
  - `nullable`：是否允许 `NULL`（默认 `true`）。
  - `unique`：是否唯一约束（默认 `false`）。
  - `length`：字符串长度（默认 `255`）。
  - `precision`：数值精度（总位数）。
  - `scale`：小数位数。
  - `columnDefinition`：自定义列定义（如 `VARCHAR(100) NOT NULL`）。

```java
@Column(name = "user_name", nullable = false, length = 50)
private String username;
```

### 2. `@Transient`
- **作用**：标记字段不持久化到数据库。

### 3. `@Enumerated`
- **作用**：映射枚举类型。
- **参数**：
  - `value`：存储方式（`EnumType.STRING` 存储枚举名，`EnumType.ORDINAL` 存储序号）。

```java
@Enumerated(EnumType.STRING)
private UserStatus status; // 存储为 "ACTIVE", "INACTIVE" 等
```

### 4. `@Temporal`
- **作用**：映射日期时间类型。
- **参数**：
  - `value`：时间类型（`TemporalType.DATE`、`TIME`、`TIMESTAMP`）。

```java
@Temporal(TemporalType.TIMESTAMP)
private Date createdAt;
```

### 5. `@Lob`
- **作用**：标记字段为大数据类型（如 `CLOB` 或 `BLOB`）。
- **适用类型**：
  - `String` → `CLOB`
  - `byte[]` → `BLOB`

---

## 四、**关系映射注解**
定义实体间的关联关系。

### 1. `@OneToOne`
- **作用**：定义一对一关系。
- **参数**：
  - `mappedBy`：指向对方实体中关联字段的名称（用于双向关联）。
  - `cascade`：级联操作（如 `CascadeType.PERSIST`）。
  - `fetch`：加载策略（`FetchType.LAZY` 或 `EAGER`）。

```java
@OneToOne(mappedBy = "user", cascade = CascadeType.ALL)
private Profile profile;
```

### 2. `@OneToMany` / `@ManyToOne`
- **作用**：定义一对多或多对一关系。
- **参数**：
  - `mappedBy`：指定多方实体中的关联字段。
  - `orphanRemoval`：是否自动删除孤儿数据（默认 `false`）。

```java
// 一方
@OneToMany(mappedBy = "user", orphanRemoval = true)
private List<Order> orders;

// 多方
@ManyToOne
@JoinColumn(name = "user_id")
private User user;
```

### 3. `@ManyToMany`
- **作用**：定义多对多关系。
- **参数**：
  - `mappedBy`：指定维护关系的实体。

```java
// 一方
@ManyToMany(mappedBy = "students")
private List<Course> courses;

// 另一方
@ManyToMany
@JoinTable(
  name = "student_course",
  joinColumns = @JoinColumn(name = "course_id"),
  inverseJoinColumns = @JoinColumn(name = "student_id"))
private List<Student> students;
```

### 4. `@JoinColumn`
- **作用**：指定外键列。
- **参数**：
  - `name`：外键列名。
  - `referencedColumnName`：引用的主键列名（默认对方主键）。

---

## 五、**继承策略注解**
定义实体继承映射策略。

### 1. `@Inheritance`
- **作用**：指定继承映射策略。
- **参数**：
  - `strategy`：策略类型（`InheritanceType.SINGLE_TABLE`、`JOINED`、`TABLE_PER_CLASS`）。

### 2. `@DiscriminatorColumn`
- **作用**：在单表继承策略中定义鉴别列。
- **参数**：
  - `name`：鉴别列名。
  - `discriminatorType`：列类型（如 `DiscriminatorType.STRING`）。

### 3. `@DiscriminatorValue`
- **作用**：指定子类在鉴别列中的值。

```java
@Entity
@Inheritance(strategy = InheritanceType.SINGLE_TABLE)
@DiscriminatorColumn(name = "type", discriminatorType = DiscriminatorType.STRING)
public class Animal { ... }

@Entity
@DiscriminatorValue("DOG")
public class Dog extends Animal { ... }
```

---

## 六、**生命周期回调注解**
监听实体生命周期事件。

### 1. `@PrePersist` / `@PostPersist`
- **作用**：在实体插入前/后触发。

### 2. `@PreUpdate` / `@PostUpdate`
- **作用**：在实体更新前/后触发。

### 3. `@PreRemove` / `@PostRemove`
- **作用**：在实体删除前/后触发。

```java
@PrePersist
public void beforeSave() {
  this.createdAt = new Date();
}
```

---

## 七、**查询相关注解**
定义查询和结果映射。

### 1. `@NamedQuery`
- **作用**：定义静态 JPQL 查询。
- **参数**：
  - `name`：查询名称。
  - `query`：JPQL 语句。

```java
@Entity
@NamedQuery(name = "User.findByEmail", query = "SELECT u FROM User u WHERE u.email = :email")
public class User { ... }
```

### 2. `@NamedNativeQuery`
- **作用**：定义原生 SQL 查询。
- **参数**：
  - `resultClass`：映射的结果类。
  - `resultSetMapping`：自定义结果集映射。

---

## 八、**Hibernate 扩展注解**
Hibernate 特有功能增强。

### 1. `@Type`
- **作用**：指定 Hibernate 自定义类型（如 `JsonType`）。
- **参数**：
  - `type`：类型全限定类名。

```java
@Type(type = "com.vladmihalcea.hibernate.type.json.JsonType")
private Map<String, Object> properties;
```

### 2. `@DynamicUpdate`
- **作用**：仅更新变化的字段（优化性能）。
- **参数**：
  - `value`：是否启用（默认 `true`）。

### 3. `@Formula`
- **作用**：定义计算列（不存储到数据库）。
- **参数**：
  - `value`：SQL 表达式。

```java
@Formula("(SELECT COUNT(*) FROM orders o WHERE o.user_id = id)")
private int orderCount;
```

---

## 九、**验证注解（JSR 380）**
数据校验（需集成 Bean Validation）。

### 1. `@NotNull` / `@NotBlank`
- **作用**：字段不允许为 `null` 或空字符串。

### 2. `@Size`
- **作用**：限制字符串或集合大小。
- **参数**：
  - `min` / `max`：最小/最大长度。

```java
@NotBlank
@Size(min = 5, max = 20)
private String password;
```

---

## 总结
- **JPA 标准注解**（如 `@Entity`, `@Table`, `@Column`）是通用规范，适用于所有实现（Hibernate、EclipseLink 等）。
- **Hibernate 扩展注解**（如 `@Type`, `@Formula`）需明确依赖 Hibernate。
- 根据业务场景选择合适的注解，如关联关系映射需谨慎设计 `mappedBy` 和级联操作。