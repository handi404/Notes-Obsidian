Java 11 带来的这个非常方便的特性：**单文件源码程序启动**。这个特性对于 Java 初学者、脚本编写和快速原型验证来说，是一个巨大的体验提升。

---

### 单文件源码程序启动 (Launch Single-File Source-Code Programs)

#### 1. 核心概念 (Core Concept)

在 Java 11 之前，一个标准的 Java 程序执行流程是：
1.  **编写**：创建一个 `.java` 源文件（例如 `HelloWorld.java`）。
2.  **编译**：使用 `javac HelloWorld.java` 命令，将其编译成 `.class` 字节码文件 (`HelloWorld.class`)。
3.  **运行**：使用 `java HelloWorld` 命令，让 Java 虚拟机 (JVM) 加载并执行该字节码文件。

Java 11 允许你将**第 2 步和第 3 步合并为一步**。你可以直接在命令行上**对 `.java` 源文件执行 `java` 命令**，系统会在内存中自动完成编译，然后直接运行，**不会在磁盘上生成 `.class` 文件**。

**通俗比喻：**
*   **传统方式：** 你想做一道菜。你需要先照着**菜谱 (`.java`)** 把所有食材准备好并切好（**编译成 `.class`**），然后才能点火开炒（**运行**）。
*   **Java 11 单文件模式：** 你有了一个“智能厨房机器人”。你直接把**菜谱 (`.java`)** 给它，它自己就会在内部完成备菜、切菜的所有步骤，然后直接把做好的菜端给你，整个过程一气呵成，厨房里还干干净净，没有留下任何中间产物（`.class` 文件）。

**核心命令：**
```bash
# 传统方式
javac MyProgram.java
java MyProgram

# Java 11 新方式
java MyProgram.java
```

#### 2. 演进与现代化 (Evolution & Modernization)

*   **Java 11 之前 (The Pain Point):**
    *   **对初学者不友好：** `javac` 和 `java` 的两步操作，以及对 classpath 的理解，是 Java 入门的第一个障碍。很多人会困惑为什么 `java MyProgram.java` 会报错。
    *   **不适合脚本化：** 像 Python, Perl, Bash 这样的脚本语言，都是直接 `python script.py` 就能运行。Java 的编译步骤使其在编写简单脚本和自动化任务方面显得很“重”。
    *   **快速原型验证繁琐：** 只是想测试一小段代码，也需要经历“编写-编译-运行”的循环，效率不高。

*   **Java 11 (The Solution):**
    这个特性让 Java 在轻量级应用场景下，拥有了和脚本语言类似的便利性。它降低了 Java 的入门门槛，拓宽了 Java 的应用领域。

*   **现代化应用场景：**
    *   **教学和演示：** 教师可以更专注于 Java 语言本身，而不是工具链的配置。
    *   **脚本编写：** 可以使用 Java 编写一些系统管理、文件处理等脚本，特别是在需要利用 Java 强大生态库的场景下。
    *   **Docker/CI/CD：** 在容器化或持续集成环境中，可以直接运行一个 `.java` 文件来执行一个简单的任务，而无需构建一个完整的项目。
    *   **代码面试/在线编程：** 在一些只需要提交单个文件的编程挑战中，这个特性非常方便。

#### 3. 代码示例 (Code Example)

1.  **创建一个简单的 `.java` 文件：**
    ```java
    // Greeting.java
    public class Greeting {
        public static void main(String[] args) {
            // Java 11 可以接收命令行参数
            String name = (args.length > 0) ? args[0] : "World";
            System.out.println("Hello, " + name + "!");
        }
    }
    ```

2.  **在命令行中直接运行：**
    打开你的终端 (Terminal/CMD)，确保你的 JDK 版本是 11 或更高。

    ```bash
    # 不带参数运行
    $ java Greeting.java
    Hello, World!

    # 带参数运行
    $ java Greeting.java Java11
    Hello, Java11!
    ```
    你会发现，目录下**没有生成 `Greeting.class` 文件**。

3.  **使用 Shebang (类 Unix 系统)：**
    在 Linux 或 macOS 上，你甚至可以像写 Shell 脚本一样，在文件顶部加上 "shebang" 行，使其成为一个可直接执行的脚本。

    **创建文件 `hello.sh.java` (文件名不重要):**
    ```java
    #!/usr/bin/env java --source 11

    public class HelloScript {
        public static void main(String[] args) {
            System.out.println("This is a Java script!");
        }
    }
    ```

    **赋予执行权限并运行：**
    ```bash
    $ chmod +x hello.sh.java
    $ ./hello.sh.java
    This is a Java script!
    ```
    **注意：** `--source 11` 这个参数是必需的，它告诉 `java` 命令源文件的版本，以便启用这个特性。

#### 4. 扩展与应用 (Limitations & Scope)

这个特性虽然方便，但它**仅适用于“单文件”程序**。这意味着：

*   **所有代码必须在同一个 `.java` 文件中。** 你不能在一个文件中定义一个类，然后在另一个文件中去使用它。所有需要的类要么是 JDK 自带的，要么都定义在这同一个文件里。
    ```java
    // Valid.java
    public class Valid {
        public static void main(String[] args) {
            Helper.sayHi();
        }
    }

    class Helper { // OK: Helper is in the same file
        public static void sayHi() {
            System.out.println("Hi from Helper!");
        }
    }
    ```
    
*   **启动时，第一个被编译的类必须包含 `main` 方法。**

#### 5. 要点与注意事项 (Key Points & Cautions)

1.  **不是银弹：** 这个特性是为**小型、简单的程序**设计的。对于任何有一定复杂度的、需要多文件、依赖管理、构建系统的项目，你仍然应该使用标准的 `javac` / `java` 流程，并借助 Maven 或 Gradle 等构建工具。
2.  **性能：** 每次运行都会进行一次内存中的编译，所以相比直接运行 `.class` 文件，启动会稍微慢一点。对于需要频繁快速启动的场景，先编译好是更优的选择。
3.  **依赖外部库：** 默认情况下，你不能直接 `import` 第三方的 JAR 包。虽然可以通过 `--class-path` 参数来指定，但一旦开始这样做，就意味着你的程序已经超出了“单文件”的简单范畴，最好还是回归到传统项目结构。
4.  **文件名与类名：** 在单文件模式下，源文件名**不一定**要和 `public` 类名完全一致。`java` 命令会智能地找到文件中的 `main` 方法来执行。但遵循标准命名规范总是一个好习惯。

总结来说，单文件源码程序启动是 Java 为了拥抱“轻量化”和“脚本化”趋势而迈出的重要一步。它不会改变大型企业应用的开发方式，但却极大地改善了 Java 在教学、快速原型和小型工具开发领域的体验。