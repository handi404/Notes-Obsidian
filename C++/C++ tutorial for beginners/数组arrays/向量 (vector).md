
## C++ 向量 (vector) 深入解析

### 向量是什么？

C++中的向量（vector）是一种动态数组，它可以自动调整大小以适应不断变化的数据。你可以把它想象成一个可以伸缩的盒子，你可以随时向里面添加或删除物品。

### 为什么使用向量？

- **动态性：** 不需要事先指定大小，可以根据需要随时增加或减少元素。
- **方便性：** 提供了丰富的成员函数，使得插入、删除、查找等操作变得非常简单。
- **迭代器支持：** 可以使用迭代器方便地遍历向量中的元素。
- **安全性：** 在访问元素时，向量会进行边界检查，避免越界访问。

### 向量与数组的比较

|特点|数组|向量|
|---|---|---|
|大小|固定|动态|
|内存分配|在编译时分配|在运行时分配|
|操作|访问元素效率高，但插入删除效率低|插入删除效率高，但访问元素效率稍低|
|安全性|没有边界检查，越界访问可能导致程序崩溃|有边界检查，更安全|

### 向量常用操作

- **创建向量：**
    
    ```C++
    std::vector<int> numbers; // 创建一个空的整数向量
    std::vector<string> fruits = {"apple", "banana", "orange"}; // 初始化一个字符串向量
    ```
    
- **访问元素：**
    
    ```C++
    cout << numbers[0] << endl; // 访问第一个元素
    cout << numbers.back() << endl; // 访问最后一个元素
    for (auto fruit : fruits) { // 范围for循环遍历
        cout << fruit << " ";
    }
    ```
    
- **添加元素：**
    
    ```C++
    numbers.push_back(42); // 在末尾添加元素
    numbers.insert(numbers.begin() + 2, 100); // 在指定位置插入元素
    ```
    
- **删除元素：**
    
    ```C++
    numbers.pop_back(); // 删除最后一个元素
    numbers.erase(numbers.begin()); // 删除第一个元素
    numbers.clear(); // 清空所有元素
    ```
    
- **查询：**
    
    ```C++
    cout << numbers.size() << endl; // 获取元素个数
    cout << numbers.empty() << endl; // 判断是否为空
    ```
    

### 向量迭代器

迭代器是一种指向容器元素的指针，可以用来遍历容器中的元素。向量提供了 `begin()` 和 `end()` 函数返回指向第一个和最后一个元素之后的迭代器。

```C++
std::vector<int>::iterator it;
for (it = numbers.begin(); it != numbers.end(); ++it) {
    cout << *it << " ";
}
```

### 向量常见问题

- **迭代器失效：** 当插入或删除元素时，迭代器可能会失效。
- **内存管理：** 向量会自动管理内存，但要注意避免内存泄漏。
- **性能：** 在频繁插入删除元素的场景下，向量可能会导致性能下降。

### 向量应用场景

- **存储动态数据：** 存储数量不确定的数据，如用户输入、文件读取等。
- **实现栈、队列等数据结构：** 向量可以用来模拟栈、队列等数据结构。
- **作为其他容器的底层实现：** 很多容器类都是基于向量实现的。

### 总结

向量是C++中非常强大和灵活的容器，在实际编程中有着广泛的应用。通过掌握向量的基本用法和特性，可以大大提高编程效率。