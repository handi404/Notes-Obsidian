[[break & continue]]
[[C++/C++ tutorial for beginners/嵌套循环|嵌套循环]]
[[“foreach”循环]]
```c++
#include <iostream>
 
int main()
{
   for(int i = 10; i > 0; i--){
      //count down to 10
      std::cout << i << '\n';
   }
 
   std::cout << "HAPPY NEW YEAR!\n";  
 
   return 0;
}
```

C++ 在 C++11 之后引入了 **基于范围的for循环**，它的功能和其它语言中的 foreach 循环类似，用于简化对容器（如数组、vector、map 等）元素的遍历。

### C++ 基于范围的 for 循环

这种循环的语法非常简洁：


```C++
for (auto 元素 : 容器) {
    // 对元素进行操作
}
```

- **auto**: 编译器会自动推断元素的类型。
- **元素**: 循环变量，表示当前遍历到的元素。
- **容器**: 要遍历的容器。

**示例：**


```C++
#include <iostream>
#include <vector>

using namespace std;

int main() {
    vector<int> numbers = {1, 2, 3, 4, 5};

    // 遍历并打印每个元素
    for (int num : numbers) {
        cout << num << " ";
    }
    cout << endl;

    return 0;
}
```

### 为什么选择基于范围的 for 循环？

- **简洁易读:** 语法简洁，代码更直观。
- **安全:** 不需要手动管理迭代器，避免越界访问。
- **高效:** 编译器通常会生成高效的代码。

### 注意事项

- **只读访问:** 默认情况下，循环变量是只读的。如果要在循环中修改元素，需要使用引用：
    
    
    ```C++
    for (int &num : numbers) {
        num *= 2; // 修改元素的值
    }
    ```
    
- **容器类型:** 适用于支持范围的容器，如 `vector`, `array`, `list`, `set`, `map` 等。
- **自定义类型:** 对于自定义类型，需要提供合适的迭代器或范围。

### 与传统 for 循环的区别

| 特点  | 基于范围的 for 循环 | 传统 for 循环    |
| --- | ------------ | ------------ |
| 语法  | 简洁，自动推断类型    | 复杂，需要手动管理索引  |
| 安全性 | 更安全，不易越界     | 易越界，需要小心边界检查 |
| 可读性 | 更易读          | 相对较差         |

### 总结

C++ 的基于范围的 for 循环极大地简化了容器元素的遍历，提高了代码的可读性和安全性。在实际编程中，建议尽可能地使用这种方式。