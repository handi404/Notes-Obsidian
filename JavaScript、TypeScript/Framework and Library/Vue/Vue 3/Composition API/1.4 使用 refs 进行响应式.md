setup ä¸­çš„å˜é‡ä¸æ˜¯ååº”å˜é‡ï¼Œè¿™æ„å‘³ç€å½“å®ƒä»¬æ”¹å˜æ—¶å®ƒä¸ä¼šè‡ªåŠ¨æ›´æ–°æ¨¡æ¿ä¸­çš„è¿™äº›å€¼ï¼Œè¿™ä¸ªæ—¶å€™å°±éœ€è¦åœ¨ setup ä¸­ä½¿ç”¨ ref
```vue
<template>
  <div class="home">
    Home
    <p>My name is {{ name }}, age is {{ age }}</p>
    <button @click="handleClick">click me</button>
    <button @click="age++">add 1 to age</button>
Â  Â  <input type="text" v-model="name" />
  </div>
</template>

<script>
import { ref } from "vue";
export default {
  setup() {
    const name = ref("Home");
    const age = ref(25);
    console.log(name, age);
    const handleClick = (params) => {
      name.value = "Home Clicked";
      age.value = 26;
    };
    return {
      name,
      age,
      handleClick,
    };
  },
};
</script>
<style></style>
```
ref æ˜¯è¢«åŠ¨çš„ï¼Œå½“å®ƒä»¬åƒè¿™æ ·æ›´æ–°æ—¶ï¼Œå®ƒä»¬ä¹Ÿä¼šåœ¨æ¨¡æ¿ä¸­æ›´æ–°,è¿™æ ·å®ƒä»¬å°±æ˜¯å“åº”å¼å€¼

---

## **Vue 3 `ref` è¯¦è§£ï¼ˆä½¿ç”¨ `setup()` å½¢å¼ï¼‰**

åœ¨ Vue 3 ç»„åˆå¼ API (`Composition API`) ä¸­ï¼Œ`ref` æ˜¯åˆ›å»º**å“åº”å¼æ•°æ®**çš„æ ¸å¿ƒ API ä¹‹ä¸€ã€‚å®ƒå…è®¸åœ¨ `setup()` ä¸­åˆ›å»ºå“åº”å¼å˜é‡ï¼Œå¹¶åœ¨æ¨¡æ¿ä¸­è‡ªåŠ¨æ›´æ–° UIã€‚

---

## **1. `setup()` ä¸­ä½¿ç”¨ `ref`**

åœ¨ `setup()` ä¸­ï¼Œ`ref` åˆ›å»ºçš„å˜é‡å¯ä»¥ç›´æ¥ç»‘å®šåˆ°æ¨¡æ¿ã€‚

### **ç¤ºä¾‹ï¼šåŸºæœ¬æ•°æ®ç±»å‹**

```vue
<template>
  <p>å½“å‰è®¡æ•°ï¼š{{ count }}</p>
  <button @click="increment">å¢åŠ </button>
</template>

<script>
import { ref } from 'vue';

export default {
  setup() {
    const count = ref(0); // åˆ›å»ºå“åº”å¼å˜é‡

    const increment = () => {
      count.value++; // ä¿®æ”¹ ref å˜é‡
    };

    return { count, increment }; // å¿…é¡»è¿”å›ç»™æ¨¡æ¿
  }
};
</script>
```

### **ğŸ“Œ è§£æ**

- `ref(0)`: `count` å˜æˆå“åº”å¼æ•°æ®ã€‚
- `count.value++`: `ref` å˜é‡å¿…é¡»é€šè¿‡ `.value` è®¿é—®å’Œä¿®æ”¹ã€‚
- `setup()` è¿”å›çš„ `count` å’Œ `increment` å¯åœ¨æ¨¡æ¿ä¸­ä½¿ç”¨ã€‚

---

## **2. `ref` ç»‘å®šå¯¹è±¡**

### **ç¤ºä¾‹ï¼šä½¿ç”¨ `ref` ç»‘å®šå¯¹è±¡**

```vue
<template>
  <p>å§“åï¼š{{ user.name }}</p>
  <button @click="updateName">ä¿®æ”¹å§“å</button>
</template>

<script>
import { ref } from 'vue';

export default {
  setup() {
    const user = ref({ name: 'å¼ ä¸‰' });

    const updateName = () => {
      user.value.name = 'æå››'; // ä¿®æ”¹ ref å¯¹è±¡çš„å±æ€§
    };

    return { user, updateName };
  }
};
</script>
```

### **ğŸ“Œ è§£æ**

- `ref({ name: 'å¼ ä¸‰' })`: `user` å˜æˆä¸€ä¸ªå“åº”å¼å¯¹è±¡ã€‚
- **ä¿®æ”¹ `user.value.name` æ—¶ï¼ŒVue è‡ªåŠ¨æ›´æ–° UI**ã€‚

---

## **3. `ref` ç»‘å®šæ•°ç»„**

### **ç¤ºä¾‹ï¼šæ“ä½œå“åº”å¼æ•°ç»„**

```vue
<template>
  <ul>
    <li v-for="(item, index) in list" :key="index">{{ item }}</li>
  </ul>
  <button @click="addItem">æ·»åŠ é¡¹</button>
</template>

<script>
import { ref } from 'vue';

export default {
  setup() {
    const list = ref(['è‹¹æœ', 'é¦™è•‰', 'æ©™å­']);

    const addItem = () => {
      list.value.push('æ–°é¡¹'); // æ·»åŠ æ–°å…ƒç´ 
    };

    return { list, addItem };
  }
};
</script>
```

### **ğŸ“Œ è§£æ**

- `ref([])`: `list` å˜æˆä¸€ä¸ªå“åº”å¼æ•°ç»„ã€‚
- `list.value.push('æ–°é¡¹')`: ä¿®æ”¹æ•°ç»„æ—¶**ä»ç„¶éœ€è¦ `.value`**ã€‚

---

## **4. `ref` ç›‘å¬æ•°æ®å˜åŒ–**

### **ç¤ºä¾‹ï¼š`watch()` ç›‘å¬ `ref`**

```vue
<script>
import { ref, watch } from 'vue';

export default {
  setup() {
    const count = ref(0);

    watch(count, (newVal, oldVal) => {
      console.log(`count å˜åŒ–: ${oldVal} -> ${newVal}`);
    });

    const increment = () => {
      count.value++;
    };

    return { count, increment };
  }
};
</script>
```

### **ğŸ“Œ è§£æ**

- `watch(count, callback)`: ç›‘å¬ `count.value` çš„å˜åŒ–ã€‚
- è§¦å‘ `increment()` åï¼Œ`watch()` ä¼šæ‰“å°å‡º `oldVal -> newVal`ã€‚

---

## **5. `ref` ç»‘å®šåˆ° `computed` è®¡ç®—å±æ€§**

### **ç¤ºä¾‹ï¼šè®¡ç®— `ref` çš„æ–°å€¼**

```vue
<template>
  <p>åŸå§‹ä»·æ ¼: {{ price }}</p>
  <p>æŠ˜æ‰£ä»·: {{ discountPrice }}</p>
  <button @click="increasePrice">æ¶¨ä»·</button>
</template>

<script>
import { ref, computed } from 'vue';

export default {
  setup() {
    const price = ref(100);
    const discountPrice = computed(() => price.value * 0.9);

    const increasePrice = () => {
      price.value += 10;
    };

    return { price, discountPrice, increasePrice };
  }
};
</script>
```

### **ğŸ“Œ è§£æ**

- `computed()` åˆ›å»ºåŸºäº `ref` è®¡ç®—çš„å€¼ (`discountPrice`)ã€‚
- `price.value += 10` åï¼Œ**`discountPrice` ä¹Ÿä¼šè‡ªåŠ¨æ›´æ–°**ã€‚

---

## **6. `ref` ç»‘å®šåˆ° DOM**

å¯ä»¥é€šè¿‡ `ref` è·å– DOM å…ƒç´ ã€‚

### **ç¤ºä¾‹ï¼šè·å–æŒ‰é’®å…ƒç´ **

```vue
<template>
  <button ref="myButton" @click="focusButton">ç‚¹å‡»èšç„¦</button>
</template>

<script>
import { ref, onMounted } from 'vue';

export default {
  setup() {
    const myButton = ref(null);

    const focusButton = () => {
      myButton.value.focus(); // è®¿é—® DOM æ–¹æ³•
    };

    return { myButton, focusButton };
  }
};
</script>
```

### **ğŸ“Œ è§£æ**

- `myButton.value` è·å–åˆ°çš„æ˜¯ `button` DOM å…ƒç´ ã€‚
- `focusButton()` ç›´æ¥è°ƒç”¨ `focus()` æ–¹æ³•ã€‚

---

## **7. `setup()` è¿”å› `ref` æ•°æ®çš„æ–¹å¼**

åœ¨ `setup()` ä¸­ï¼Œå¯ä»¥ç”¨ä¸¤ç§æ–¹å¼è¿”å› `ref` å˜é‡ï¼š

1. **ç›´æ¥è¿”å› `ref`**ï¼ˆæ¨¡æ¿ä¼šè‡ªåŠ¨è§£åŒ… `.value`ï¼‰ã€‚
2. **è¿”å› `ref.value`**ï¼ˆåœ¨ `setup()` å†…æ‰‹åŠ¨è§£åŒ…ï¼‰ã€‚

### **æ–¹å¼ 1ï¼šç›´æ¥è¿”å› `ref`**

```vue
<template>
  <p>{{ count }}</p>  <!-- Vue è‡ªåŠ¨è§£åŒ… .value -->
</template>

<script>
import { ref } from 'vue';

export default {
  setup() {
    const count = ref(0);
    return { count };  // ç›´æ¥è¿”å› ref
  }
};
</script>
```

**âœ”ï¸ `count` ä¼šè‡ªåŠ¨è§£åŒ… `count.value`**

---

### **æ–¹å¼ 2ï¼šè¿”å› `ref.value`**

```vue
<template>
  <p>{{ count }}</p> <!-- è¿™é‡Œçš„ count ä¸æ˜¯ ref -->
</template>

<script>
import { ref } from 'vue';

export default {
  setup() {
    const count = ref(0);
    return { count: count.value }; // è¿™é‡Œè¿”å›çš„æ˜¯æ™®é€šå˜é‡
  }
};
</script>
```

**ğŸš¨ è¿™æ · `count` å°±ä¸ä¼šæ˜¯å“åº”å¼çš„ï¼**

---

## **8. æ€»ç»“**

|åŠŸèƒ½|ä»£ç ç¤ºä¾‹|
|---|---|
|**åŸºæœ¬ç±»å‹**|`const count = ref(0);`|
|**å¯¹è±¡**|`const user = ref({ name: 'å¼ ä¸‰' });`|
|**æ•°ç»„**|`const list = ref(['è‹¹æœ', 'é¦™è•‰']);`|
|**ç›‘å¬ `ref`**|`watch(count, (newVal) => {});`|
|**è®¡ç®—å±æ€§**|`const discount = computed(() => price.value * 0.9);`|
|**ç»‘å®š DOM**|`const el = ref(null);`|

`ref` æ˜¯ Vue 3 ç»„åˆå¼ API ä¸­æœ€å¸¸ç”¨çš„å“åº”å¼æ•°æ®ç®¡ç†æ–¹å¼ï¼Œç»“åˆ `computed`ã€`watch` ç­‰åŠŸèƒ½ï¼Œå¯ä»¥å®ç°å¼ºå¤§çš„å“åº”å¼é€»è¾‘ã€‚