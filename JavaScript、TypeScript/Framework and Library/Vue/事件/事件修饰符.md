### **Vue 中的事件修饰符详解**

事件修饰符是 Vue 提供的特殊语法，用于简化事件绑定时常见的操作行为。通过修饰符，可以更方便地控制事件的传播、触发次数、默认行为等。

---

### **1. 什么是事件修饰符？**

事件修饰符是附加在事件绑定指令后的特殊标记，用于修改事件的默认行为或触发机制。

基本语法：

```vue
<element v-on:eventName.modifier="methodName"></element>
```

或使用简写形式：

```vue
<element @eventName.modifier="methodName"></element>
```

---

### **2. 常用的事件修饰符**

#### **（1）`.stop` - 阻止事件冒泡**

作用：阻止事件冒泡到父级元素。

示例：

```vue
<template>
  <div @click="handleParentClick">
    <button @click.stop="handleButtonClick">点击按钮</button>
  </div>
</template>

<script>
export default {
  methods: {
    handleParentClick() {
      console.log('父元素点击');
    },
    handleButtonClick() {
      console.log('按钮点击');
    }
  }
};
</script>
```

**效果**：

- 点击按钮时，只会触发 `handleButtonClick`，不会触发父元素的 `handleParentClick`。

---

#### **（2）`.prevent` - 阻止默认事件**

作用：阻止事件的默认行为。

示例：

```vue
<template>
  <form @submit.prevent="handleSubmit">
    <button type="submit">提交</button>
  </form>
</template>

<script>
export default {
  methods: {
    handleSubmit() {
      console.log('表单提交被拦截');
    }
  }
};
</script>
```

**效果**：

- 阻止了表单的默认提交行为，仅执行 `handleSubmit` 方法。

---

#### **（3）`.capture` - 使用事件捕获模式**

作用：使用捕获模式监听事件，而非冒泡模式。

示例：

```vue
<template>
  <div @click.capture="handleCaptureClick">
    <button @click="handleButtonClick">点击按钮</button>
  </div>
</template>

<script>
export default {
  methods: {
    handleCaptureClick() {
      console.log('捕获到父元素点击');
    },
    handleButtonClick() {
      console.log('按钮点击');
    }
  }
};
</script>
```

**效果**：

- 父元素的捕获事件优先于子元素的事件触发，先输出 `"捕获到父元素点击"`，再输出 `"按钮点击"`。

---

#### **（4）`.self` - 仅当前元素触发**

作用：只有事件从绑定的当前元素本身触发时才会执行。

示例：

```vue
<template>
  <div @click.self="handleSelfClick" style="width: 200px; height: 200px; background: lightblue;">
    点击内部不会触发
    <button>点击我</button>
  </div>
</template>

<script>
export default {
  methods: {
    handleSelfClick() {
      console.log('点击到 div 自身');
    }
  }
};
</script>
```

**效果**：

- 点击 `div` 空白处触发事件，点击内部的按钮不会触发。

---

#### **（5）`.once` - 只触发一次**

作用：绑定的事件处理器只会触发一次。

示例：

```vue
<template>
  <button @click.once="handleClick">只触发一次</button>
</template>

<script>
export default {
  methods: {
    handleClick() {
      console.log('按钮点击');
    }
  }
};
</script>
```

**效果**：

- 无论点击按钮多少次，事件处理器只会执行一次。

---

#### **（6）`.passive` - 提升滚动性能**

作用：告诉浏览器事件处理器不会调用 `event.preventDefault()`，用于提升滚动性能。

示例：

```vue
<template>
  <div @scroll.passive="handleScroll" style="height: 200px; overflow-y: scroll;">
    <p v-for="i in 50" :key="i">滚动内容 {{ i }}</p>
  </div>
</template>

<script>
export default {
  methods: {
    handleScroll() {
      console.log('正在滚动');
    }
  }
};
</script>
```

**效果**：

- 优化了滚动性能，避免阻塞滚动。

---

### **3. 多个修饰符的组合使用**

修饰符可以组合使用，以满足复杂场景需求。

示例：

```vue
<template>
  <button @click.stop.prevent="handleClick">阻止冒泡和默认行为</button>
</template>

<script>
export default {
  methods: {
    handleClick() {
      console.log('按钮点击');
    }
  }
};
</script>
```

**效果**：

- 同时阻止冒泡和默认行为。

---

### **4. 事件修饰符的优先级**

修饰符的顺序很重要，Vue 按从左到右的顺序依次解析修饰符。

示例：

```vue
<template>
  <button @click.prevent.once="handleClick">点击我</button>
</template>
```

- `.prevent` 先阻止默认行为。
- `.once` 确保事件只触发一次。

---

### **5. 总结事件修饰符的作用**

| 修饰符        | 功能            | 场景举例             |
| ---------- | ------------- | ---------------- |
| `.stop`    | 阻止事件冒泡        | 子组件阻止父组件的事件      |
| `.prevent` | 阻止事件的默认行为     | 表单提交拦截，阻止链接跳转    |
| `.capture` | 使用事件捕获模式      | 优先捕获父级事件         |
| `.self`    | 仅当前元素触发       | 点击空白区域触发，忽略子元素点击 |
| `.once`    | 事件处理器只触发一次    | 限制按钮只能点击一次       |
| `.passive` | 提升滚动性能，防止阻塞滚动 | 滚动事件监听           |

修饰符可以单独使用，也可以组合使用。根据需求合理选择，可以简化代码，提高事件处理的可读性和性能。