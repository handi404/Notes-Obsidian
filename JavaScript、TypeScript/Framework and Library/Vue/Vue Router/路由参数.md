### **详解 Vue Router 中的 Route Parameters（路由参数）**

Vue Router 中的 Route Parameters（路由参数）用于向路由动态传递数据，常见的有路径参数和查询参数。这些参数使得单页面应用能够根据不同的上下文渲染不同的内容，例如用户详情页、搜索结果页等。

---

### **1. 路由参数分类**

1. **路径参数（Path Parameters）**  
    路径的一部分，通常通过 `:` 定义动态段。
    
2. **查询参数（Query Parameters）**  
    以 `?key=value` 的形式附加在 URL 后。
    
3. **哈希参数（Hash Parameters）**  
    路径中以 `#` 开头的部分，用于定位页面中的特定元素。
    

---

### **2. 路径参数**

#### **2.1 定义路径参数**

在路由规则中，通过 `:` 定义动态路径参数。例如：

```javascript
const routes = [
  {
    path: '/user/:id',
    name: 'User',
    component: User
  }
];
```

- `:id` 是一个占位符，表示路径中的动态部分。
- URL `/user/123` 会匹配这个路由，`id` 的值为 `123`。

#### **2.2 获取路径参数**

在匹配的组件中，可以通过 `$route.params` 获取路径参数：

```vue
<template>
  <div>
    <h1>User ID: {{ id }}</h1>
  </div>
</template>

<script>
export default {
  data() {
	  return {
	  	id: this.$route.params.id;
	  }
  }
};
</script>
```

#### **2.3 声明式导航传递参数**

使用 `<router-link>` 配合对象形式传递路径参数：

```vue
<template>
  <router-link :to="{ name: 'User', params: { id: 123 } }">Go to User 123</router-link>
</template>
```
在这里发送的路由参数可以接受作为链接到的地方中的 prop但必须做一件事，那就是在这个组件的路由中添加一个 props 属性并将其设置为 true
```js
const routes = [
  {
    path: '/user/:id',
    name: 'User',
    component: User,
    props: true,
  }
];
```
#### **注意事项**

- 当使用命名路由传递参数时，路径参数不能单独与 `path` 一起使用，例如：
    
    ```javascript
    this.$router.push({ path: '/user', params: { id: 123 } }); // 无效
    ```
    
    必须使用命名路由：
    
    ```javascript
    this.$router.push({ name: 'User', params: { id: 123 } }); // 有效
    ```
    

---

### **3. 查询参数**

#### **3.1 定义查询参数**

查询参数无需在路由规则中显式定义，可以在任何路由中附加。例如：

```javascript
this.$router.push({ name: 'Search', query: { q: 'Vue', page: 2 } });
```

URL 将生成：`/search?q=Vue&page=2`

#### **3.2 获取查询参数**

在匹配的组件中，可以通过 `$route.query` 获取：

```vue
<template>
  <div>
    <h1>Search Query: {{ query }}</h1>
    <h2>Page: {{ page }}</h2>
  </div>
</template>

<script>
export default {
  computed: {
    query() {
      return this.$route.query.q; // 获取查询参数 q
    },
    page() {
      return this.$route.query.page; // 获取查询参数 page
    }
  }
};
</script>
```

#### **3.3 声明式导航传递查询参数**

使用 `<router-link>` 传递查询参数：

```vue
<template>
  <router-link :to="{ name: 'Search', query: { q: 'Vue', page: 2 } }">
    Search Vue
  </router-link>
</template>
```

---

### **4. 哈希参数**

#### **4.1 定义哈希参数**

哈希参数通常用于定位页面中的特定位置。例如：

```javascript
this.$router.push({ path: '/about', hash: '#team' });
```

URL 将生成：`/about#team`

#### **4.2 获取哈希参数**

在匹配的组件中，可以通过 `$route.hash` 获取：

```vue
<template>
  <div>
    <h1>Current Hash: {{ currentHash }}</h1>
  </div>
</template>

<script>
export default {
  computed: {
    currentHash() {
      return this.$route.hash; // 获取哈希参数
    }
  }
};
</script>
```

#### **4.3 使用 `<router-link>` 定义哈希导航**

```vue
<template>
  <router-link :to="{ path: '/about', hash: '#team' }">Go to Team Section</router-link>
</template>
```

页面加载后，浏览器会自动滚动到具有 `id="team"` 的元素。

---

### **5. 参数匹配的细节**

#### **5.1 多个动态路径参数**

可以定义多个动态参数：

```javascript
const routes = [
  {
    path: '/user/:id/post/:postId',
    name: 'UserPost',
    component: UserPost
  }
];
```

#### **示例 URL：**

`/user/123/post/456`

#### **获取参数：**

```javascript
this.$route.params.id; // 123
this.$route.params.postId; // 456
```

---

#### **5.2 可选参数**

通过添加 `?`，定义可选的动态参数：

```javascript
const routes = [
  {
    path: '/user/:id/:extra?',
    name: 'UserOptional',
    component: UserOptional
  }
];
```

- URL `/user/123` 和 `/user/123/extraInfo` 均可匹配。

---

#### **5.3 匹配任意路径（通配符）**

使用 `*` 定义通配符，匹配所有路径：

```javascript
const routes = [
  {
    path: '/:pathMatch(.*)*',
    name: 'NotFound',
    component: NotFound
  }
];
```

---

### **6. 参数的总结**

|**类型**|**定义位置**|**获取方式**|**示例 URL**|
|---|---|---|---|
|**路径参数**|路由规则中使用 `:` 定义|`$route.params`|`/user/123`|
|**查询参数**|路由规则中不需要定义|`$route.query`|`/search?q=Vue&page=2`|
|**哈希参数**|路由规则中不需要定义|`$route.hash`|`/about#team`|

动态参数使得 Vue Router 灵活适应各种需求，包括页面动态渲染、条件筛选和深度链接。通过合理运用路径参数、查询参数和哈希参数，可以实现复杂的路由功能。



# **Vue Router 路由参数（Route Parameters）详解**

在 Vue Router 中，**路由参数（Route Parameters）** 允许我们在路由路径中定义**动态参数**，使相同的路由匹配不同的 URL，并在组件中获取参数值。

---

## **1. 定义动态路由参数**

在 Vue Router 中，使用 `:` 语法定义路由参数：

```js
import { createRouter, createWebHistory } from 'vue-router';
import User from '@/components/User.vue';

const routes = [
  { path: '/user/:id', component: User }
];

const router = createRouter({
  history: createWebHistory(),
  routes
});

export default router;
```

### **📌 解析**

- `path: '/user/:id'` —— `:id` 是动态参数，匹配 `/user/123`、`/user/456` 等路径。
- 访问 `/user/1`，`id` 的值为 `1`，访问 `/user/2`，`id` 的值为 `2`。

---

## **2. 在组件中获取路由参数**

Vue Router 提供 `useRoute()` 组合式 API 获取当前路由参数。

### **示例：获取 `id` 参数**

```vue
<script setup>
import { useRoute } from 'vue';

const route = useRoute();
console.log(route.params.id); // 获取 URL 参数
</script>
```

**📌 解析**

- `route.params.id` 获取 URL 动态参数，如 `/user/123` 时 `id = 123`。

---

## **3. 响应式监听路由参数**

当**路由参数变化**时，组件不会重新加载，默认情况下 `setup()` 不会重新执行。因此，我们需要监听参数变化。

### **使用 `watch()` 监听参数**

```vue
<script setup>
import { useRoute } from 'vue';
import { watch } from 'vue';

const route = useRoute();

// 监听 id 变化
watch(() => route.params.id, (newId, oldId) => {
  console.log(`id 从 ${oldId} 变成 ${newId}`);
});
</script>
```

### **📌 解析**

- 当 URL 从 `/user/1` 变为 `/user/2`，`watch()` 会触发回调。

---

## **4. 多个参数**

如果路径包含多个参数，如：

```js
{ path: '/user/:id/:name', component: User }
```

访问 `/user/123/john`：

```vue
console.log(route.params.id);   // "123"
console.log(route.params.name); // "john"
```

---

## **5. 可选参数**

Vue Router 支持**可选参数**，在参数后加 `?`：

```js
{ path: '/user/:id/:name?', component: User }
```

- `/user/123` ✅（匹配 `id=123`，`name` 为空）
- `/user/123/john` ✅（匹配 `id=123`，`name=john`）

---

## **6. 正则匹配参数**

可以使用**自定义正则表达式**，例如：

```js
{ path: '/user/:id(\\d+)', component: User }
```

- `/user/123` ✅（匹配）
- `/user/abc` ❌（不匹配）

---

## **7. 传递参数的方式**

### **方法 1：`router-link` 方式**

```vue
<router-link :to="'/user/' + userId">用户详情</router-link>
```

等效于：

```vue
<router-link :to="{ path: '/user/' + userId }">用户详情</router-link>
```

### **方法 2：`params` 方式**

```vue
<router-link :to="{ name: 'User', params: { id: 123 }}">用户详情</router-link>
```

**📌 注意**

- `params` 方式**必须使用 `name`**，否则 Vue Router 不会正确解析路径。

---

## **8. 编程式导航**

使用 `router.push()` **动态跳转**：

```vue
<script setup>
import { useRouter } from 'vue';

const router = useRouter();
const goToUser = (id) => {
  router.push({ name: 'User', params: { id } });
};
</script>
```

---

## **总结**

|功能|语法|
|---|---|
|**定义动态参数**|`path: '/user/:id'`|
|**获取参数**|`route.params.id`|
|**监听参数变化**|`watch(() => route.params.id, callback)`|
|**多个参数**|`path: '/user/:id/:name'`|
|**可选参数**|`path: '/user/:id/:name?'`|
|**正则匹配**|`path: '/user/:id(\\d+)'`|
|**路由跳转**|`<router-link :to="{ name: 'User', params: { id: 123 }}">`|

🚀 **掌握这些路由参数用法，可以让你的 Vue 3 应用更加灵活！**