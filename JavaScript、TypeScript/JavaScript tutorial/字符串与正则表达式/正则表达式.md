### 正则表达式详解

正则表达式（**Regular Expressions**，简称 **regex**）是一种用于匹配字符串的模式。它被广泛应用于文本搜索、验证、替换等操作。

#### 1. 正则表达式的组成

正则表达式由普通字符（如字母、数字）和特殊字符（称为元字符）组成。这些元字符可以用来构建复杂的匹配模式。

### 2. 正则表达式中的基本元字符

#### 2.1 字符类（Character Classes）

字符类用于定义在某个位置允许出现的字符类型。

- **`.`**：匹配除换行符 `\n` 外的任意单个字符。
  ```regex
  .   // 匹配任意字符（除了换行符）
  ```
  **示例：**
  ```javascript
  let regex = /./;
  console.log("a".match(regex));  // 'a'
  console.log("1".match(regex));  // '1'
  ```

- **`[abc]`**：匹配方括号内的任意字符。
  ```regex
  [abc]  // 匹配 'a'、'b' 或 'c' 中的任意一个字符
  ```

- **`[^abc]`**：匹配除 `a`、`b`、`c` 之外的任意字符（^表示取反）。
  ```regex
  [^abc]  // 匹配非 'a'、'b' 或 'c' 的字符
  ```

- **`\d`**：匹配任何数字字符，相当于 `[0-9]`。
  ```regex
  \d  // 匹配 0-9 之间的任意数字
  ```

- **`\D`**：匹配任何非数字字符，相当于 `[^0-9]`。
  ```regex
  \D  // 匹配非数字字符
  ```

- **`\w`**：匹配任意字母、数字或下划线字符（相当于 `[A-Za-z0-9_]`）。
  ```regex
  \w  // 匹配字母、数字或下划线
  ```

- **`\W`**：匹配任何非字母、数字或下划线字符。
  ```regex
  \W  // 匹配非字母、数字或下划线
  ```

- **`\s`**：匹配空白字符（空格、制表符、换行符等）。
  ```regex
  \s  // 匹配空格、制表符、换行符等
  ```

- **`\S`**：匹配非空白字符。
  ```regex
  \S  // 匹配非空白字符
  ```

#### 2.2 重复（Quantifiers）

这些元字符用于匹配字符的数量。

- **`*`**：匹配前面的字符 0 次或多次。
  ```regex
  a*   // 匹配 0 个或多个 'a'
  ```

- **`+`**：匹配前面的字符 1 次或多次。
  ```regex
  a+   // 匹配 1 个或多个 'a'
  ```

- **`?`**：匹配前面的字符 0 次或 1 次。
  ```regex
  a?   // 匹配 0 个或 1 个 'a'
  ```

- **`{n}`**：匹配前面的字符恰好 n 次。
  ```regex
  a{3}  // 匹配 3 个 'a'
  ```

- **`{n,}`**：匹配前面的字符至少 n 次。
  ```regex
  a{3,}  // 匹配至少 3 个 'a'
  ```

- **`{n,m}`**：匹配前面的字符至少 n 次，至多 m 次。
  ```regex
  a{2,5}  // 匹配 2 到 5 个 'a'
  ```

#### 2.3 边界符（Anchors）

边界符用于匹配字符串的特定位置，而不是字符。

- **`^`**：匹配字符串的开始。
  ```regex
  ^a   // 匹配以 'a' 开头的字符串
  ```

- **`$`**：匹配字符串的结束。
  ```regex
  a$   // 匹配以 'a' 结尾的字符串
  ```

- **`\b`**：匹配单词边界。
  ```regex
  \bword\b   // 匹配单词 'word'，确保其前后都有边界
  ```

- **`\B`**：匹配非单词边界。
  ```regex
  \Bword\B   // 匹配字符串 'word'，但不能是独立的单词
  ```

#### 2.4 分组和选择（Grouping & Alternation）

- **`(abc)`**：分组，将多个字符视为一个整体。
  ```regex
  (abc)+  // 匹配 'abc' 的 1 次或多次重复
  ```

- **`|`**：或，匹配多个可能的选项。
  ```regex
  a|b   // 匹配 'a' 或 'b'
  ```

#### 2.5 特殊转义字符

- **`\`**：反斜杠用于转义字符。比如，`.` 是匹配任意字符，而 `\.` 表示匹配点字符本身。

### 3. 正则表达式的创建与使用

正则表达式可以通过两种方式创建：

#### 3.1 字面量创建

```javascript
let regex = /abc/;
```

#### 3.2 构造函数创建

```javascript
let regex = new RegExp('abc');
```

### 4. 正则表达式的常用方法

#### 4.1 `test()` 方法

用于测试字符串是否匹配正则表达式。如果匹配则返回 `true`，否则返回 `false`。

```javascript
let regex = /hello/;
console.log(regex.test("hello world")); // true
console.log(regex.test("world"));       // false
```

#### 4.2 `exec()` 方法

用于搜索正则表达式在字符串中的匹配。返回一个包含匹配结果的数组，如果没有匹配到则返回 `null`。

```javascript
let regex = /hello/;
let result = regex.exec("hello world");
console.log(result);  // ['hello']
```

#### 4.3 字符串方法 `match()`

`match()` 方法是字符串的方法，用于将字符串与正则表达式进行匹配。返回一个包含匹配结果的数组，或者 `null`。

```javascript
let str = "hello world";
let result = str.match(/hello/);
console.log(result);  // ['hello']
```

#### 4.4 字符串方法 `replace()`

`replace()` 方法用于替换匹配的部分。

```javascript
let str = "hello world";
let result = str.replace(/world/, "JavaScript");
console.log(result);  // 'hello JavaScript'
```

### 5. 正则修饰符（Modifiers）

- **`g`**：全局匹配（global match），即找到所有匹配而不是只匹配一次。
- **`i`**：忽略大小写（ignore case）。
- **`m`**：多行匹配（multiline match）。

**示例：**
```javascript
let regex = /hello/g;   // 匹配所有 'hello'
let regex2 = /hello/i;  // 忽略大小写，匹配 'hello' 或 'HELLO'
```

### 6. 常见应用场景

#### 6.1 表单验证

正则表达式经常用于表单验证，比如验证电子邮件地址、手机号等。

**电子邮件验证示例：**
```javascript
let email = "test@example.com";
let regex = /^[a-zA-Z0-9._%+-]+@[a-zA-Z0-9.-]+\.[a-zA-Z]{2,}$/;
console.log(regex.test(email));  // true
```

#### 6.2 搜索和替换

正则表达式可以高效地在字符串中搜索或替换文本内容。

**示例：替换所有数字为 `#`**
```javascript
let str = "Phone: 12345";
let result = str.replace(/\d/g, "#");
console.log(result);  // 'Phone: #####'
```

### 7. 综合练习：表单验证示例

**示例：表单手机号验证**
```javascript
let phone = "123-456-7890";
let phoneRegex = /^\d{3}-\d{3}-\d{4}$/;
console.log(phoneRegex.test(phone));  // true
```

通过正则表达式，可以灵活地构建复杂的匹配规则，处理各种文本数据，提升开发效率。