Nuxt 现在默认采用新的目录结构，具有向后兼容性（因此，如果 Nuxt 检测到您正在使用旧结构，例如使用顶级 `pages/` 目录，则此新结构将不适用）。

#### 发生了什么变化

- 新的 Nuxt 默认 `srcDir` 是 `app/` ，大多数事情都从那里解决。
- `serverDir` 现在默认为 `<rootDir>/server` 而不是 `<srcDir>/server`
- 默认情况下 `layers/` 、 `modules/` 和 `public/` 相对于 `<rootDir>` 进行解析
- i如果使用 Nuxt Content v 2.13+ ， `content/`相对于 `<rootDir>` 解析
- 添加了一个新的 `dir.app` ，这是我们查找 `router.options.ts` 和 `spa-loading-template.html` 的目录 - 默认为 `<srcDir>/`

v4 文件夹结构示例。
```
.output/
.nuxt/
app/
  assets/
  components/
  composables/
  layouts/
  middleware/
  pages/
  plugins/
  utils/
  app.config.ts
  app.vue
  router.options.ts
content/
layers/
modules/
node_modules/
public/
server/
  api/
  middleware/
  plugins/
  routes/
  utils/
nuxt.config.ts
```

####  改变的原因

1.  **性能** - 将所有代码放在 repo 的根目录中会导致 FS 监视程序扫描/包含 `.git/` 和 `node_modules/` 文件夹出现问题，这会显著延迟非 Mac OS 上的启动。
2. **IDE 类型安全** - `server/` 和应用程序的其余部分在两个完全不同的上下文中运行，具有不同的全局导入，并且确保 `server/` 不在与应用程序的其余部分相同的文件夹_中_ ，这是确保您在 IDE 中获得良好自动完成功能的第一步。

#### Migration Steps  迁移步骤

1. 创建一个名为 `app/` 新目录。
2. 将您的 `assets/` 、 `components/` 、 `composables/` 、 `layouts/` 、 `middleware/` 、 `pages/` 、 `plugins/` 和 `utils/` 文件夹以及 `app.vue` 、 `error.vue` 和 `app.config.ts` 移至其下方。如果您有 `app/router-options.ts` 或 `app/spa-loading-template.html` ，则这些路径保持不变。
3. 确保您的 `nuxt.config.ts` 、 `content/` 、 `layers/` 、 `modules/` 、 `public/` 和 `server/` 文件夹位于项目根目录中的 `app/` 文件夹之外。
4. 请记住更新任何第三方配置文件以适应新的目录结构，例如 `tailwindcss` 或 `eslint` 配置（如果需要 - `@nuxtjs/tailwindcss` 应该自动正确配置 `tailwindcss` ）。

您可以通过运行 `npx codemod@latest nuxt/4/file-structure` 来自动执行此迁移

但是，迁移*并非必需*。如果您希望保留当前的文件夹结构，Nuxt 应该会自动检测。（如果没有，请提出问题。）唯一的例外是，如果您*已经*有一个自定义的 `srcDir` 。在这种情况下，您应该注意，您的 `modules/` 、 `public/` 和 `server/` 文件夹将从您的 `rootDir` 解析，而不是从您自定义的 `srcDir` 解析。如果需要，您可以通过配置 `dir.modules` 、 `dir.public` 和 `serverDir` 来覆盖此设置。

您还可以使用以下配置强制使用 v3 文件夹结构：
```ts
export default defineNuxtConfig({
  // This reverts the new srcDir default from `app` back to your root directory
  srcDir: '.',
  // This specifies the directory prefix for `app/router.options.ts` and `app/spa-loading-template.html`
  dir: {
    app: 'app'
  }
})
```

