
```json
db.students.find({$and: [{fullTime:true}, {age:{$lte:22}}]})
db.students.find({$or: [{fullTime:true}, {age:{$lte:22}}]})
db.students.find({$nor: [{fullTime:true}, {age:{$lte:22}}]})
db.students.find({age:{$not:{$gte:30}}}) //返回age不大于等于30的。包括null
```

## MongoDB 逻辑运算符详解

MongoDB 的逻辑运算符用于组合多个查询条件，从而实现更复杂的查询。它们可以将多个简单的查询条件连接起来，形成更复杂的查询表达式。

### 常用逻辑运算符

- **$and:** 用于连接多个表达式，只有当所有表达式都为真时，整个表达式才为真。
- **$or:** 用于连接多个表达式，只要有一个表达式为真，整个表达式就为真。
- **$not**:用于否定一个表达式，如果表达式为真，则not的结果为假，反之亦然。
- **$nor:** 用于连接多个表达式，只有当所有表达式都为假时，整个表达式才为真。

### 示例

假设我们有一个名为 `users` 的集合，其中包含以下文档：

```JSON
{ "_id": 1, "name": "Alice", "age": 25, "city": "Beijing" }
{ "_id": 2, "name": "Bob", "age": 30, "city": "Shanghai" }
{ "_id": 3, "name": "Charlie", "age": 28, "city": "Guangzhou" }
```

**查询年龄大于 25 岁且城市为北京的用户：**

```JSON
db.users.find({ $and: [ { age: { $gt: 25 } }, { city: "Beijing" } ] })
```

**查询年龄小于 30 岁或城市为上海的用户：**

```JSON
db.users.find({ $or: [ { age: { $lt: 30 } }, { city: "Shanghai" } ] })
```

**查询不是北京的用户：**

```JSON
db.users.find({ city: { $ne: "Beijing" } })  // 使用$ne来实现$not的效果
```

**查询既不是北京也不是上海的用户：**

```JSON
db.users.find({ $nor: [ { city: "Beijing" }, { city: "Shanghai" } ] })
```

### 复杂查询示例

**查询年龄在 25 到 30 岁之间（含）且城市为北京或上海的用户：**

```JSON
db.users.find({
    $and: [
        { age: { $gte: 25, $lte: 30 } },
        { $or: [ { city: "Beijing" }, { city: "Shanghai" } ] }
    ]
})
```

### 注意事项

- **嵌套使用:** 逻辑运算符可以嵌套使用，以构建更复杂的查询条件。
- **索引:** 为了提高查询效率，建议为经常用作查询条件的字段创建索引。
- **空值:** 在处理空值时，需要特别注意。例如，`{ field: null }` 可以用来查找字段值为 null 的文档。

### 其他逻辑运算符

除了上述常见的逻辑运算符，MongoDB 还提供了其他一些逻辑运算符，如：

- **$exists:** 检查字段是否存在
- **$type:** 检查字段的数据类型
- **$in:** 检查字段值是否在指定数组中
- **$nin:** 检查字段值是否不在指定数组中