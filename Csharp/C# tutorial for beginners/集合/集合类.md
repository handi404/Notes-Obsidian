
**C#集合类** 是.NET Framework提供的一组强大的工具，用于存储、管理和操作对象集合。它们为开发者提供了一种灵活、类型安全且高效的方式来处理数据。

### 为什么使用集合类？

- **动态大小：** 不需要预先指定集合的大小，可以根据需要动态增长。
- **类型安全：** 编译器可以确保你只向集合中添加指定类型的元素。
- **丰富的功能：** 提供了多种操作集合的方法，如添加、删除、查找、排序等。
- **迭代器：** 方便地遍历集合中的元素。

### 常用集合类

- **List<T>：**
    - 有序的元素集合，可以根据索引访问元素。
    - 支持快速随机访问。
    - 常用于需要频繁插入、删除元素的场景。
- **Dictionary<TKey, TValue>：**
    - 通过键值对存储元素，每个键都是唯一的。
    - 提供快速的查找操作。
    - 常用于需要根据键快速查找值的场景。
- **HashSet<T>：**
    - 无序的元素集合，每个元素都是唯一的。
    - 提供快速的添加、删除和包含判断操作。
    - 常用于需要保证元素唯一性的场景。
- **Queue<T>：**
    - 先进先出（FIFO）的集合。
    - 常用于模拟队列、缓冲区等场景。
- **Stack<T>：**
    - 后进先出（LIFO）的集合。
    - 常用于实现函数调用栈、撤销重做功能等。

### 选择合适的集合类

选择哪个集合类取决于你的具体需求：

- **访问方式：** 如果需要频繁随机访问元素，List<T> 是一个不错的选择；如果需要根据键快速查找值，Dictionary<TKey, TValue> 是更好的选择。
- **元素唯一性：** 如果需要保证元素唯一性，HashSet<T> 是一个很好的选择。
- **插入删除顺序：** 如果需要按照插入顺序访问元素，List<T> 是一个不错的选择；如果需要按照先进先出或后进先出的顺序访问元素，Queue<T> 或 Stack<T> 是更好的选择。


## C# 集合类的初始化和常用方法

### 初始化

C# 集合类提供了多种初始化方式，最常见的是使用构造函数和集合初始化器。

**1. 构造函数初始化**

- **List<T>:**
    
    C#
    
    ```
    List<int> numbers = new List<int>(); // 创建空列表
    List<string> names = new List<string> { "Alice", "Bob", "Charlie" }; // 创建并初始化列表
    ```
    
- **Dictionary<TKey, TValue>:**
    
    C#
    
    ```
    Dictionary<string, int> ages = new Dictionary<string, int>(); // 创建空字典
    Dictionary<int, string> lookup = new Dictionary<int, string> { { 1, "One" }, { 2, "Two" } }; // 创建并初始化字典
    ```
    
- **HashSet<T>:**
    
    C#
    
    ```
    HashSet<int> uniqueNumbers = new HashSet<int>(); // 创建空集合
    HashSet<string> words = new HashSet<string> { "apple", "banana", "orange" }; // 创建并初始化集合
    ```
    

**2. 集合初始化器**

集合初始化器是一种更简洁的初始化方式，尤其适用于初始化时就已知所有元素的情况。

C#

```
var colors = new List<string> { "red", "green", "blue" };
var person = new Dictionary<string, string> { { "Name", "Alice" }, { "Age", "30" } };
```

### 常用方法

- **添加元素:**
    - `Add`: 向集合末尾添加元素。
    - `AddRange`: 向集合末尾添加一个集合的元素。
- **删除元素:**
    - `Remove`: 移除指定元素。
    - `RemoveAt`: 根据索引移除元素。
    - `Clear`: 清空整个集合。
- **查找元素:**
    - `Contains`: 判断集合中是否包含指定元素。
    - `IndexOf`: 获取指定元素的索引。
- **遍历元素:**
    - `foreach`: 遍历集合中的每个元素。
    - `for` 循环结合索引器（对于 List<T>）。
- **排序:**
    - `Sort`: 对集合进行排序（List<T>）。
    - 使用 LINQ 进行自定义排序。
- **其他:**
    - `Count`: 获取集合元素个数。
    - `Any`: 判断集合是否包含元素。
    - `All`: 判断集合中所有元素是否满足某个条件。

### 示例

C#

```
// List<T> 示例
List<int> numbers = new List<int> { 3, 1, 4, 1, 5, 9 };
numbers.Add(2);
numbers.Remove(1);
numbers.Sort(); // 排序
Console.WriteLine(numbers.Count); // 输出元素个数

// Dictionary<TKey, TValue> 示例
Dictionary<string, int> ages = new Dictionary<string, int>();
ages.Add("Alice", 30);
ages.Add("Bob", 25);
if (ages.ContainsKey("Alice"))
{
    Console.WriteLine(ages["Alice"]);
}

// HashSet<T> 示例
HashSet<string> fruits = new HashSet<string> { "apple", "banana", "apple" }; // 重复元素会被忽略
Console.WriteLine(fruits.Count); // 输出 2
```

### 泛型集合的优势

- **类型安全:** 编译器可以在编译时检查类型错误。
- **效率:** 避免了装箱和拆箱操作。
- **可读性:** 代码更清晰易懂。

### 小结

C# 集合类为我们提供了强大的工具来管理数据。选择合适的集合类取决于你的具体需求，如访问方式、元素唯一性、插入删除顺序等。通过灵活运用这些集合类，可以写出高效、简洁的代码。