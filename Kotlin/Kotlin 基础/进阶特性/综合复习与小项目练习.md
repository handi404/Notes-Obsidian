### **Kotlin 综合复习与小项目练习**

---

经过前面的学习，我们已经掌握了 Kotlin 的基础语法、核心功能以及函数式编程的基本思想。第 7 天的目标是通过综合复习巩固所学知识，并通过小项目实践将理论转化为实际开发能力。以下是复习内容及小项目的具体设计和实现。

---

## **1. 综合复习**

### **1.1 核心概念回顾**

1. **变量与数据类型**
    
    - 可变变量 `var` 和不可变变量 `val`。
    - 常用数据类型：`Int`, `Double`, `String`, `Boolean` 等。
2. **条件语句和循环**
    
    - 条件语句：`if` 和 `when`。
    - 循环：`for` 和 `while`。
3. **函数与参数**
    
    - 函数定义：普通函数与高阶函数。
    - 可选参数与默认参数。
    - Lambda 表达式。
4. **类与对象**
    
    - 类的定义与构造函数。
    - 数据类、继承与多态。
    - 扩展函数与属性。
5. **集合**
    
    - 集合类型：`List`, `Set`, `Map`。
    - 常用操作：`map`, `filter`, `reduce`, `fold`。
6. **空安全**
    
    - 可空类型 `?` 与非空断言 `!!`。
    - Elvis 操作符 `?:`。
7. **函数式编程**
    
    - 纯函数、高阶函数。
    - 函数组合与惰性序列。

---

### **1.2 常见开发模式**

1. **面向对象编程（OOP）**：
    
    - 封装、继承、多态。
    - 使用类和对象解决问题。
2. **函数式编程（FP）**：
    
    - 使用高阶函数、Lambda 表达式处理数据流。
    - 不可变性与纯函数的应用。
3. **组合编程**：
    
    - 结合 OOP 和 FP 的优势，灵活解决复杂问题。

---

## **2. 小项目练习**

### **2.1 项目目标**

**构建一个简单的任务管理应用**，实现以下功能：

1. 添加任务。
2. 删除任务。
3. 标记任务为已完成。
4. 显示所有任务、未完成任务和已完成任务。

---

### **2.2 项目需求**

1. **任务模型**：
    
    - 使用数据类表示任务（`Task`），包含以下属性：
        - `id`: 任务 ID。
        - `description`: 任务描述。
        - `isCompleted`: 任务是否已完成。
2. **任务管理类**：
    
    - 管理所有任务的添加、删除和更新操作。
    - 提供方法按状态筛选任务。
3. **用户界面（命令行交互）**：
    
    - 提供用户选项，通过命令行交互实现功能。

---

### **2.3 项目实现**

以下是完整代码实现：

#### **任务数据类**

```kotlin
data class Task(val id: Int, val description: String, var isCompleted: Boolean = false)
```

#### **任务管理类**

```kotlin
class TaskManager {
    private val tasks = mutableListOf<Task>()
    private var nextId = 1

    // 添加任务
    fun addTask(description: String) {
        val task = Task(id = nextId++, description = description)
        tasks.add(task)
        println("任务已添加：$task")
    }

    // 删除任务
    fun deleteTask(id: Int) {
        val task = tasks.find { it.id == id }
        if (task != null) {
            tasks.remove(task)
            println("任务已删除：$task")
        } else {
            println("未找到 ID 为 $id 的任务！")
        }
    }

    // 标记任务为完成
    fun markTaskCompleted(id: Int) {
        val task = tasks.find { it.id == id }
        if (task != null) {
            task.isCompleted = true
            println("任务已标记为完成：$task")
        } else {
            println("未找到 ID 为 $id 的任务！")
        }
    }

    // 显示所有任务
    fun showAllTasks() {
        if (tasks.isEmpty()) {
            println("当前没有任务！")
        } else {
            println("所有任务：")
            tasks.forEach { println(it) }
        }
    }

    // 显示已完成任务
    fun showCompletedTasks() {
        val completedTasks = tasks.filter { it.isCompleted }
        if (completedTasks.isEmpty()) {
            println("没有已完成的任务！")
        } else {
            println("已完成任务：")
            completedTasks.forEach { println(it) }
        }
    }

    // 显示未完成任务
    fun showPendingTasks() {
        val pendingTasks = tasks.filter { !it.isCompleted }
        if (pendingTasks.isEmpty()) {
            println("没有未完成的任务！")
        } else {
            println("未完成任务：")
            pendingTasks.forEach { println(it) }
        }
    }
}
```

#### **用户界面**

```kotlin
fun main() {
    val taskManager = TaskManager()
    while (true) {
        println(
            """
            请选择操作：
            1. 添加任务
            2. 删除任务
            3. 标记任务为完成
            4. 显示所有任务
            5. 显示已完成任务
            6. 显示未完成任务
            7. 退出
        """.trimIndent()
        )

        val choice = readLine()?.toIntOrNull()
        when (choice) {
            1 -> {
                print("请输入任务描述：")
                val description = readLine().orEmpty()
                taskManager.addTask(description)
            }
            2 -> {
                print("请输入任务 ID：")
                val id = readLine()?.toIntOrNull()
                if (id != null) {
                    taskManager.deleteTask(id)
                } else {
                    println("请输入有效的任务 ID！")
                }
            }
            3 -> {
                print("请输入任务 ID：")
                val id = readLine()?.toIntOrNull()
                if (id != null) {
                    taskManager.markTaskCompleted(id)
                } else {
                    println("请输入有效的任务 ID！")
                }
            }
            4 -> taskManager.showAllTasks()
            5 -> taskManager.showCompletedTasks()
            6 -> taskManager.showPendingTasks()
            7 -> {
                println("退出任务管理系统。")
                break
            }
            else -> println("无效的选择，请重试！")
        }
    }
}
```

---

### **2.4 项目运行示例**

#### **运行交互**

```
请选择操作：
1. 添加任务
2. 删除任务
3. 标记任务为完成
4. 显示所有任务
5. 显示已完成任务
6. 显示未完成任务
7. 退出
1
请输入任务描述：完成 Kotlin 学习
任务已添加：Task(id=1, description=完成 Kotlin 学习, isCompleted=false)

请选择操作：
1. 添加任务
2. 删除任务
3. 标记任务为完成
4. 显示所有任务
5. 显示已完成任务
6. 显示未完成任务
7. 退出
3
请输入任务 ID：1
任务已标记为完成：Task(id=1, description=完成 Kotlin 学习, isCompleted=true)

请选择操作：
1. 添加任务
2. 删除任务
3. 标记任务为完成
4. 显示所有任务
5. 显示已完成任务
6. 显示未完成任务
7. 退出
5
已完成任务：
Task(id=1, description=完成 Kotlin 学习, isCompleted=true)
```

---

## **3. 练习扩展**

1. **扩展功能**：
    
    - 支持任务的优先级（高、中、低）。
    - 支持任务的截止日期，并按日期排序显示任务。
2. **优化用户界面**：
    
    - 使用命令行库（如 `kotlin-console`）美化界面。
3. **使用 Kotlin 协程**：
    
    - 在后台执行任务加载和保存操作，模拟实际应用中的异步数据处理。

---

通过完成这个小项目，你不仅能够复习和巩固 Kotlin 的基础知识，还能理解如何将面向对象和函数式编程结合起来，开发出一个功能完整的小型应用。如果在实现过程中有任何问题，请随时向我提问！ 😊