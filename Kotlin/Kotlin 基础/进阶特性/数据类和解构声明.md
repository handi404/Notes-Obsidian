### **Kotlin è¿›é˜¶ç‰¹æ€§ï¼šæ•°æ®ç±»å’Œè§£æ„å£°æ˜**

---

Kotlin çš„ **æ•°æ®ç±»**ï¼ˆData Classï¼‰æ˜¯ä¸€ç§ç‰¹æ®Šçš„ç±»ï¼Œä¸»è¦ç”¨äºå­˜å‚¨æ•°æ®ï¼Œå¹¶è‡ªåŠ¨ç”Ÿæˆå¸¸è§çš„ç±»åŠŸèƒ½ï¼ˆå¦‚ `equals`ã€`hashCode`ã€`toString`ï¼‰ã€‚æ­¤å¤–ï¼ŒKotlin çš„ **è§£æ„å£°æ˜**ï¼ˆDestructuring Declarationï¼‰å¯ä»¥è½»æ¾æå–å¯¹è±¡çš„å±æ€§å€¼ï¼Œæ˜¯éå¸¸å¼ºå¤§çš„è¯­è¨€ç‰¹æ€§ã€‚

---

## **1. æ•°æ®ç±»ï¼ˆData Classï¼‰**

### **1.1 ä»€ä¹ˆæ˜¯æ•°æ®ç±»**

æ•°æ®ç±»æ˜¯ç”¨äºå­˜å‚¨æ•°æ®çš„ç®€å•ç±»ã€‚é€šè¿‡ä½¿ç”¨ `data` å…³é”®å­—ä¿®é¥°ï¼ŒKotlin ä¼šä¸ºè¯¥ç±»è‡ªåŠ¨ç”Ÿæˆä»¥ä¸‹æ–¹æ³•ï¼š

- **`equals`**ï¼šæ¯”è¾ƒä¸¤ä¸ªå¯¹è±¡çš„å±æ€§å€¼æ˜¯å¦ç›¸ç­‰ã€‚
- **`hashCode`**ï¼šç”Ÿæˆå¯¹è±¡çš„å“ˆå¸Œå€¼ã€‚
- **`toString`**ï¼šè¿”å›å¯¹è±¡çš„å­—ç¬¦ä¸²è¡¨ç¤ºã€‚
- **`copy`**ï¼šåˆ›å»ºå¯¹è±¡çš„å‰¯æœ¬ã€‚
- **è§£æ„å£°æ˜åŠŸèƒ½**ï¼šç›´æ¥å°†ç±»çš„å±æ€§å€¼æå–åˆ°å˜é‡ä¸­ã€‚

---

### **1.2 å®šä¹‰æ•°æ®ç±»çš„åŸºæœ¬è¯­æ³•**

```kotlin
data class ClassName(val property1: Type1, val property2: Type2, ...)
```

#### ç¤ºä¾‹ï¼š

```kotlin
data class User(val name: String, val age: Int)

fun main() {
    val user = User("Alice", 25)
    println(user)  // è¾“å‡º: User(name=Alice, age=25)
}
```

- **`data` å…³é”®å­—**ï¼šè¡¨ç¤ºè¿™æ˜¯ä¸€ä¸ªæ•°æ®ç±»ã€‚
- **ä¸»æ„é€ å‡½æ•°ä¸­çš„ `val/var`**ï¼šæ•°æ®ç±»çš„å±æ€§å¿…é¡»ç”¨ `val` æˆ– `var` å£°æ˜ã€‚
- **è‡ªåŠ¨ç”Ÿæˆçš„ `toString` æ–¹æ³•**ï¼šæ‰“å°æ›´å‹å¥½çš„å­—ç¬¦ä¸²è¡¨ç¤ºã€‚

---

### **1.3 è‡ªåŠ¨ç”Ÿæˆçš„å‡½æ•°**

#### **1.3.1 `equals` å’Œ `hashCode`**

æ•°æ®ç±»é€šè¿‡ `equals` æ–¹æ³•æ¯”è¾ƒçš„æ˜¯å¯¹è±¡çš„å±æ€§å€¼ï¼Œè€Œä¸æ˜¯å¯¹è±¡çš„å¼•ç”¨åœ°å€ã€‚

```kotlin
data class User(val name: String, val age: Int)

fun main() {
    val user1 = User("Alice", 25)
    val user2 = User("Alice", 25)
    println(user1 == user2)  // è¾“å‡º: true
    println(user1 === user2) // è¾“å‡º: falseï¼ˆå¼•ç”¨ä¸åŒï¼‰
}
```

- **`==`**ï¼šæ¯”è¾ƒå¯¹è±¡çš„å€¼ï¼ˆè°ƒç”¨ `equals` æ–¹æ³•ï¼‰ã€‚
- **`===`**ï¼šæ¯”è¾ƒå¯¹è±¡çš„å¼•ç”¨åœ°å€ã€‚

---

#### **1.3.2 `copy` æ–¹æ³•**

`copy` æ–¹æ³•ç”¨äºåˆ›å»ºå¯¹è±¡çš„å‰¯æœ¬ï¼ŒåŒæ—¶å¯ä»¥ä¿®æ”¹éƒ¨åˆ†å±æ€§çš„å€¼ã€‚

```kotlin
data class User(val name: String, val age: Int)

fun main() {
    val user1 = User("Alice", 25)
    val user2 = user1.copy(age = 30)  // ä¿®æ”¹ age å±æ€§
    println(user2)  // è¾“å‡º: User(name=Alice, age=30)
}
```

---

#### **1.3.3 `toString` æ–¹æ³•**

æ•°æ®ç±»ä¼šè‡ªåŠ¨ç”Ÿæˆ `toString` æ–¹æ³•ï¼Œè¿”å›ç±»ä¸­å±æ€§å€¼çš„è¯¦ç»†å­—ç¬¦ä¸²è¡¨ç¤ºã€‚

```kotlin
fun main() {
    val user = User("Alice", 25)
    println(user)  // è¾“å‡º: User(name=Alice, age=25)
}
```

---

### **1.4 æ•°æ®ç±»çš„é™åˆ¶**

1. å¿…é¡»è‡³å°‘åŒ…å«ä¸€ä¸ª `val` æˆ– `var` ä¿®é¥°çš„å±æ€§ã€‚
2. ä¸èƒ½æ˜¯ `abstract`ã€`sealed`ã€`inner` æˆ– `open` ç±»ã€‚
3. æ•°æ®ç±»çš„ç»§æ‰¿æ˜¯å—é™çš„ï¼Œé»˜è®¤æƒ…å†µä¸‹æ˜¯ä¸å¯ç»§æ‰¿çš„ã€‚

---

## **2. è§£æ„å£°æ˜ï¼ˆDestructuring Declarationï¼‰**

### **2.1 ä»€ä¹ˆæ˜¯è§£æ„å£°æ˜**

è§£æ„å£°æ˜å…è®¸å°†å¯¹è±¡çš„å¤šä¸ªå±æ€§å€¼è§£åŒ…åˆ°å•ç‹¬çš„å˜é‡ä¸­ã€‚å¯¹äºæ•°æ®ç±»ï¼Œè§£æ„å£°æ˜ä¼šè‡ªåŠ¨æä¾›æ”¯æŒã€‚

#### åŸºæœ¬è¯­æ³•ï¼š

```kotlin
val (property1, property2, ...) = object
```

---

### **2.2 æ•°æ®ç±»ä¸è§£æ„å£°æ˜**

æ•°æ®ç±»ä¼šè‡ªåŠ¨ç”Ÿæˆ `componentN` æ–¹æ³•ï¼ˆ`component1`ã€`component2` ç­‰ï¼‰ï¼Œç”¨äºæ”¯æŒè§£æ„å£°æ˜ã€‚

#### ç¤ºä¾‹ï¼š

```kotlin
data class User(val name: String, val age: Int)

fun main() {
    val user = User("Alice", 25)
    val (userName, userAge) = user
    println(userName)  // è¾“å‡º: Alice
    println(userAge)   // è¾“å‡º: 25
}
```

- **`component1()`**ï¼šè¿”å› `name`ã€‚
- **`component2()`**ï¼šè¿”å› `age`ã€‚

---

### **2.3 è§£æ„å£°æ˜çš„çµæ´»ä½¿ç”¨**

#### **2.3.1 åœ¨å‡½æ•°ä¸­ä½¿ç”¨è§£æ„å£°æ˜**

```kotlin
data class User(val name: String, val age: Int)

fun printUserInfo(user: User) {
    val (name, age) = user
    println("Name: $name, Age: $age")
}

fun main() {
    val user = User("Alice", 25)
    printUserInfo(user)
    // è¾“å‡º: Name: Alice, Age: 25
}
```

---

#### **2.3.2 åœ¨ `for` å¾ªç¯ä¸­ä½¿ç”¨è§£æ„**

è§£æ„å£°æ˜éå¸¸é€‚åˆéå†é›†åˆæ—¶ç›´æ¥æå–å¯¹è±¡çš„å±æ€§å€¼ã€‚

```kotlin
data class User(val name: String, val age: Int)

fun main() {
    val users = listOf(User("Alice", 25), User("Bob", 30))
    
    for ((name, age) in users) {
        println("$name is $age years old")
    }
    // è¾“å‡º:
    // Alice is 25 years old
    // Bob is 30 years old
}
```

---

### **2.4 è§£æ„å£°æ˜çš„è‡ªå®šä¹‰æ”¯æŒ**

å¦‚æœä½ ä¸æ˜¯ä½¿ç”¨æ•°æ®ç±»ï¼Œè€Œæ˜¯æ™®é€šç±»ï¼Œä¹Ÿå¯ä»¥é€šè¿‡å®ç° `componentN` æ–¹æ³•æ¥è‡ªå®šä¹‰è§£æ„è¡Œä¸ºã€‚

#### ç¤ºä¾‹ï¼š

```kotlin
class Point(val x: Int, val y: Int) {
    operator fun component1() = x
    operator fun component2() = y
}

fun main() {
    val point = Point(10, 20)
    val (x, y) = point
    println("x = $x, y = $y")  // è¾“å‡º: x = 10, y = 20
}
```

---

## **3. æ•°æ®ç±»ä¸è§£æ„å£°æ˜çš„å®é™…åº”ç”¨åœºæ™¯**

### **3.1 å¤„ç†å¤šè¿”å›å€¼**

ä½¿ç”¨æ•°æ®ç±»å¯ä»¥è½»æ¾è¿”å›å¤šä¸ªå€¼ã€‚

```kotlin
data class Result(val sum: Int, val product: Int)

fun calculate(a: Int, b: Int): Result {
    return Result(a + b, a * b)
}

fun main() {
    val (sum, product) = calculate(5, 3)
    println("Sum = $sum, Product = $product")
    // è¾“å‡º: Sum = 8, Product = 15
}
```

---

### **3.2 åˆ†ç»„æ•°æ®**

æ•°æ®ç±»é€‚åˆç”¨äºåˆ†ç»„å¤æ‚æ•°æ®ã€‚

```kotlin
data class Student(val name: String, val score: Int)

fun main() {
    val students = listOf(
        Student("Alice", 90),
        Student("Bob", 85),
        Student("Charlie", 95)
    )

    val (topStudent, secondStudent) = students.sortedByDescending { it.score }.take(2)
    println("Top 1: ${topStudent.name}, Top 2: ${secondStudent.name}")
    // è¾“å‡º: Top 1: Charlie, Top 2: Alice
}
```

---

## **4. æ•°æ®ç±»å’Œè§£æ„å£°æ˜çš„ç»ƒä¹ é¢˜**

1. å®šä¹‰ä¸€ä¸ª `Book` æ•°æ®ç±»ï¼ŒåŒ…å« `title`ã€`author` å’Œ `price` å±æ€§ï¼Œå¹¶ç”¨è§£æ„å£°æ˜æå–è¿™äº›å±æ€§ã€‚
2. ç¼–å†™ä¸€ä¸ªå‡½æ•°ï¼Œæ¥æ”¶ä¸¤ä¸ªæ•´æ•°ï¼Œè¿”å›å®ƒä»¬çš„å’Œä¸å·®ï¼ˆä½¿ç”¨æ•°æ®ç±»ï¼‰ã€‚
3. ä½¿ç”¨è§£æ„å£°æ˜éå†ä¸€ä¸ª `List<Pair<Int, String>>`ï¼Œæå–æ¯ä¸ªå…ƒç´ çš„é”®å’Œå€¼ã€‚
4. ç¼–å†™ä¸€ä¸ªæ™®é€šç±» `Rectangle`ï¼Œè¡¨ç¤ºçŸ©å½¢ï¼Œå¹¶è‡ªå®šä¹‰è§£æ„å£°æ˜æ”¯æŒï¼Œè¿”å›çŸ©å½¢çš„é•¿å’Œå®½ã€‚
5. å®šä¹‰ä¸€ä¸ª `Student` æ•°æ®ç±»ï¼Œä½¿ç”¨è§£æ„å£°æ˜åœ¨ `for` å¾ªç¯ä¸­æ‰“å°æ‰€æœ‰å­¦ç”Ÿçš„åå­—å’Œåˆ†æ•°ã€‚

å®Œæˆåå¯ä»¥éšæ—¶ä¸æˆ‘è®¨è®ºç­”æ¡ˆæˆ–ç–‘é—®ï¼ ğŸ˜Š