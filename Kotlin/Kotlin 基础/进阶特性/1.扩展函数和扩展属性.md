### **Kotlin è¿›é˜¶ç‰¹æ€§ï¼šæ‰©å±•å‡½æ•°å’Œæ‰©å±•å±æ€§**

---

æ‰©å±•ï¼ˆExtensionï¼‰æ˜¯ Kotlin æä¾›çš„ä¸€ç§å¼ºå¤§åŠŸèƒ½ï¼Œå®ƒå…è®¸ä½ **ä¸ºç°æœ‰çš„ç±»æ·»åŠ æ–°çš„å‡½æ•°å’Œå±æ€§ï¼Œè€Œæ— éœ€ç»§æ‰¿æˆ–ä¿®æ”¹å…¶æºç **ã€‚æ‰©å±•å‡½æ•°å’Œå±æ€§èƒ½æå‡ä»£ç çš„ç®€æ´æ€§å’Œå¯è¯»æ€§ï¼Œéå¸¸é€‚åˆåœ¨å®é™…å¼€å‘ä¸­ä½¿ç”¨ã€‚

---

## **1. æ‰©å±•å‡½æ•°**

æ‰©å±•å‡½æ•°å…è®¸ä½ ä¸ºå·²æœ‰çš„ç±»ï¼ˆåŒ…æ‹¬ç¬¬ä¸‰æ–¹ç±»å’Œæ ‡å‡†åº“ç±»ï¼‰æ·»åŠ æ–°å‡½æ•°ã€‚

### **1.1 å®šä¹‰æ‰©å±•å‡½æ•°**

æ‰©å±•å‡½æ•°çš„å®šä¹‰è¯­æ³•ä¸ºï¼š  
`fun ClassName.functionName(parameters): ReturnType { // Function body }`

#### ç¤ºä¾‹ï¼šç»™ `String` ç±»æ·»åŠ ä¸€ä¸ªæ‰©å±•å‡½æ•°

```kotlin
fun String.isPalindrome(): Boolean {
    return this == this.reversed()
}

fun main() {
    val word = "madam"
    println(word.isPalindrome())  // è¾“å‡º: true
}
```

- **`String`**ï¼šæ‰©å±•çš„ç›®æ ‡ç±»ã€‚
- **`isPalindrome()`**ï¼šæ‰©å±•å‡½æ•°ï¼Œæ£€æŸ¥å­—ç¬¦ä¸²æ˜¯å¦æ˜¯å›æ–‡ã€‚
- **`this`**ï¼šä»£è¡¨è¢«æ‰©å±•çš„å¯¹è±¡ï¼ˆæ­¤å¤„æ˜¯å­—ç¬¦ä¸²æœ¬èº«ï¼‰ã€‚

---

### **1.2 ä½¿ç”¨æ‰©å±•å‡½æ•°çš„æ³¨æ„äº‹é¡¹**

1. **æ‰©å±•å‡½æ•°ä¸ä¼šçœŸæ­£ä¿®æ”¹ç±»**ï¼šå®ƒåªæ˜¯å¯¹è¯¥ç±»çš„ä¸€ä¸ªâ€œé™æ€â€æ‰©å±•ã€‚
    - ä½ ä¸èƒ½é€šè¿‡æ‰©å±•å‡½æ•°ç›´æ¥è®¿é—®ç±»çš„ç§æœ‰æˆå‘˜æˆ–å—ä¿æŠ¤æˆå‘˜ã€‚
2. **æ‰©å±•å‡½æ•°çš„è°ƒç”¨ä¼˜å…ˆçº§**ï¼šå¦‚æœç±»ä¸­å·²ç»å®šä¹‰äº†åŒåå‡½æ•°ï¼Œåˆ™ä¼˜å…ˆè°ƒç”¨ç±»æœ¬èº«çš„å‡½æ•°ï¼Œè€Œéæ‰©å±•å‡½æ•°ã€‚

#### ç¤ºä¾‹ï¼š

```kotlin
class Example {
    fun greet() {
        println("Class function")
    }
}

fun Example.greet() {
    println("Extension function")
}

fun main() {
    val example = Example()
    example.greet()  // è¾“å‡º: Class function
}
```

---

### **1.3 å®ç”¨ç¤ºä¾‹ï¼šæ‰©å±•é›†åˆæ“ä½œ**

æ‰©å±•å‡½æ•°å¯ä»¥ç”¨äºé›†åˆçš„å¢å¼ºæ“ä½œã€‚

#### ç¤ºä¾‹ï¼šç»Ÿè®¡é›†åˆä¸­å¶æ•°çš„ä¸ªæ•°

```kotlin
fun List<Int>.countEvens(): Int {
    return this.count { it % 2 == 0 }
}

fun main() {
    val numbers = listOf(1, 2, 3, 4, 5, 6)
    println(numbers.countEvens())  // è¾“å‡º: 3
}
```

---

## **2. æ‰©å±•å±æ€§**

æ‰©å±•å±æ€§å…è®¸ä½ ä¸ºç±»æ·»åŠ æ–°çš„å±æ€§ï¼Œä½†å®é™…ä¸Šæ‰©å±•å±æ€§æ˜¯é€šè¿‡ **getter/setter** æ¨¡æ‹Ÿå®ç°çš„ï¼Œå› æ­¤å®ƒä»¬ä¸èƒ½å­˜å‚¨çŠ¶æ€ã€‚

### **2.1 å®šä¹‰æ‰©å±•å±æ€§**

æ‰©å±•å±æ€§çš„å®šä¹‰è¯­æ³•ä¸ºï¼š  
`val/var ClassName.propertyName: PropertyType get() { // Getter body }`

#### ç¤ºä¾‹ï¼šä¸º `String` æ·»åŠ ä¸€ä¸ªæ‰©å±•å±æ€§ï¼Œè·å–ç¬¬ä¸€ä¸ªå­—ç¬¦

```kotlin
val String.firstChar: Char
    get() = this[0]

fun main() {
    val word = "Kotlin"
    println(word.firstChar)  // è¾“å‡º: K
}
```

- **`firstChar`**ï¼šæ‰©å±•å±æ€§ï¼Œç”¨äºè·å–å­—ç¬¦ä¸²çš„ç¬¬ä¸€ä¸ªå­—ç¬¦ã€‚
- **`get()`**ï¼šæ‰©å±•å±æ€§çš„ getter æ–¹æ³•ã€‚

---

### **2.2 ä½¿ç”¨æ‰©å±•å±æ€§çš„æ³¨æ„äº‹é¡¹**

1. **æ‰©å±•å±æ€§æ— æ³•å­˜å‚¨çŠ¶æ€**ï¼šå› ä¸ºå®ƒä»¬æ²¡æœ‰èƒŒåçš„å­—æ®µï¼ˆbacking fieldï¼‰ã€‚
2. **åªèƒ½é€šè¿‡ getter æˆ– setter å®šä¹‰å€¼**ï¼šå¦‚æœå®šä¹‰ä¸º `val`ï¼Œåªèƒ½æä¾› `get()`ï¼›å¦‚æœå®šä¹‰ä¸º `var`ï¼Œéœ€è¦æä¾› `get()` å’Œ `set()`ã€‚

#### ç¤ºä¾‹ï¼šä¸º `List` æ·»åŠ æ‰©å±•å±æ€§ï¼Œè·å–é›†åˆçš„ä¸­ä½æ•°

```kotlin
val List<Int>.median: Double
    get() {
        val sortedList = this.sorted()
        return if (size % 2 == 0) {
            (sortedList[size / 2 - 1] + sortedList[size / 2]) / 2.0
        } else {
            sortedList[size / 2].toDouble()
        }
    }

fun main() {
    val numbers = listOf(1, 3, 5, 7)
    println(numbers.median)  // è¾“å‡º: 4.0
}
```

---

## **3. æ‰©å±•ä¸ç»§æ‰¿**

æ‰©å±•å‡½æ•°å’Œå±æ€§æ— æ³•è¢«å­ç±»é‡å†™ï¼ˆoverrideï¼‰ï¼Œå› ä¸ºå®ƒä»¬åœ¨ç¼–è¯‘æœŸé™æ€è§£æã€‚å³ä½¿å­ç±»é‡å†™äº†çˆ¶ç±»ä¸­çš„æŸä¸ªæ–¹æ³•ï¼Œæ‰©å±•å‡½æ•°ä¾æ—§è°ƒç”¨çš„æ˜¯çˆ¶ç±»çš„æ‰©å±•ç‰ˆæœ¬ã€‚

#### ç¤ºä¾‹ï¼š

```kotlin
open class Parent
class Child : Parent()

fun Parent.greet() = "Hello from Parent"
fun Child.greet() = "Hello from Child"

fun main() {
    val parent: Parent = Child()
    println(parent.greet())  // è¾“å‡º: Hello from Parent
}
```

---

## **4. å¸¸è§ç”¨é€”**

### **4.1 æ·»åŠ å®ç”¨åŠŸèƒ½**

æ‰©å±•å‡½æ•°éå¸¸é€‚åˆä¸ºç¬¬ä¸‰æ–¹åº“æˆ–æ ‡å‡†åº“çš„ç±»æ·»åŠ è‡ªå®šä¹‰åŠŸèƒ½ã€‚

#### ç¤ºä¾‹ï¼šä¸º `Int` æ·»åŠ æ‰©å±•å‡½æ•°ï¼Œåˆ¤æ–­æ˜¯å¦ä¸ºå¶æ•°

```kotlin
fun Int.isEven(): Boolean = this % 2 == 0

fun main() {
    println(4.isEven())  // è¾“å‡º: true
    println(5.isEven())  // è¾“å‡º: false
}
```

---

### **4.2 æ›´ä¼˜é›…çš„ä»£ç **

æ‰©å±•å‡½æ•°å¯ä»¥ç®€åŒ–ä»£ç é€»è¾‘ï¼Œä½¿å¾—ä»£ç æ›´ç›´è§‚å’Œå¯è¯»ã€‚

#### ç¤ºä¾‹ï¼šæ£€æŸ¥ `String` æ˜¯å¦ä¸ºç©ºæˆ–ä»…åŒ…å«ç©ºæ ¼

```kotlin
fun String?.isNullOrEmptyOrBlank(): Boolean {
    return this == null || this.isEmpty() || this.isBlank()
}

fun main() {
    val str: String? = "  "
    println(str.isNullOrEmptyOrBlank())  // è¾“å‡º: true
}
```

---

## **5. Kotlin æ ‡å‡†åº“ä¸­çš„æ‰©å±•å‡½æ•°ä¸å±æ€§**

Kotlin æ ‡å‡†åº“ä¸­æœ‰è®¸å¤šæ‰©å±•å‡½æ•°å’Œæ‰©å±•å±æ€§ï¼Œä»¥ä¸‹æ˜¯ä¸€äº›å¸¸è§çš„ä¾‹å­ï¼š

### **5.1 å­—ç¬¦ä¸²çš„æ‰©å±•å‡½æ•°**

- `String.isNullOrEmpty()`ï¼šæ£€æŸ¥å­—ç¬¦ä¸²æ˜¯å¦ä¸º `null` æˆ–ç©ºã€‚
- `String.isNullOrBlank()`ï¼šæ£€æŸ¥å­—ç¬¦ä¸²æ˜¯å¦ä¸º `null`ã€ç©ºæˆ–ä»…åŒ…å«ç©ºæ ¼ã€‚

#### ç¤ºä¾‹ï¼š

```kotlin
fun main() {
    val str: String? = null
    println(str.isNullOrEmpty())  // è¾“å‡º: true
    println(str.isNullOrBlank())  // è¾“å‡º: true
}
```

---

### **5.2 é›†åˆçš„æ‰©å±•å‡½æ•°**

- `List<Int>.sum()`ï¼šè®¡ç®—åˆ—è¡¨ä¸­æ‰€æœ‰æ•°å­—çš„å’Œã€‚
- `List<Int>.average()`ï¼šè®¡ç®—åˆ—è¡¨çš„å¹³å‡å€¼ã€‚

#### ç¤ºä¾‹ï¼š

```kotlin
fun main() {
    val numbers = listOf(1, 2, 3, 4, 5)
    println(numbers.sum())  // è¾“å‡º: 15
    println(numbers.average())  // è¾“å‡º: 3.0
}
```

---

## **6. ç»ƒä¹ é¢˜**

1. å®šä¹‰ä¸€ä¸ªæ‰©å±•å‡½æ•° `Int.isOdd()`ï¼Œåˆ¤æ–­æ•´æ•°æ˜¯å¦æ˜¯å¥‡æ•°ã€‚
2. ä¸º `String` å®šä¹‰ä¸€ä¸ªæ‰©å±•å‡½æ•° `wordCount()`ï¼Œç»Ÿè®¡å­—ç¬¦ä¸²ä¸­å•è¯çš„æ•°é‡ã€‚
3. åˆ›å»ºä¸€ä¸ªæ‰©å±•å±æ€§ `List<Int>.maxValue`ï¼Œè¿”å›é›†åˆä¸­æœ€å¤§çš„å€¼ã€‚
4. ä½¿ç”¨æ‰©å±•å‡½æ•°ä¸º `List<String>` æä¾›ä¸€ä¸ª `longestWord()` æ–¹æ³•ï¼Œè¿”å›æœ€é•¿çš„å­—ç¬¦ä¸²ã€‚
5. ç¼–å†™ä¸€ä¸ªæ‰©å±•å‡½æ•° `Double.roundTo(n: Int)`ï¼Œå°†æµ®ç‚¹æ•°ä¿ç•™åˆ°æŒ‡å®šçš„å°æ•°ä½æ•°ã€‚

å®Œæˆåéšæ—¶å¯ä»¥å’Œæˆ‘è®¨è®ºç­”æ¡ˆæˆ–é—®é¢˜ï¼ ğŸ˜Š