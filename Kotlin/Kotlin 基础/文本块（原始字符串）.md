### **Kotlin 中的文本块（原始字符串）**

在 Kotlin 中，文本块（`Triple-quoted Strings` 或 **原始字符串**）是使用三引号（`"""`）包裹的字符串。与普通字符串不同，文本块可以包含多行文本，支持保留格式、换行符等。

#### **文本块的特点：**

1. **支持多行：** 可以在文本块中自由换行。
2. **保留格式：** 文本块中的空格、缩进、换行等都被保留。
3. **无需转义：** 原始字符串不需要对特殊字符（如 `\n`、`\t`）进行转义。

---

### **如何使用文本块**

#### 1. **基本语法**

```kotlin
val textBlock = """
    Kotlin 是一门现代编程语言，
    它简洁、类型安全且多平台支持。
    """
println(textBlock)
```

**输出：**

```
Kotlin 是一门现代编程语言，
它简洁、类型安全且多平台支持。
```

---

#### 2. **去除多余的缩进 - `trimMargin()`**

在文本块中，可能会因为缩进导致输出的字符串中含有额外的空格。`trimMargin()` 方法允许你去除多余的缩进。默认的分隔符是 `|`，也可以自定义分隔符。

**示例：**

```kotlin
val textBlock = """
    |Kotlin 是一门现代编程语言，
    |它简洁、类型安全且多平台支持。
    """.trimMargin()
println(textBlock)
```

**输出：**

```
Kotlin 是一门现代编程语言，
它简洁、类型安全且多平台支持。
```

---

#### 3. **自定义 `trimMargin()` 的分隔符**

可以通过传入自定义分隔符来改变 `trimMargin()` 的行为。

**示例：**

```kotlin
val textBlock = """
    >Kotlin 是一门现代编程语言，
    >它简洁、类型安全且多平台支持。
    """.trimMargin(">")
println(textBlock)
```

**输出：**

```
Kotlin 是一门现代编程语言，
它简洁、类型安全且多平台支持。
```

---

#### 4. **嵌入表达式 - 字符串模板**

文本块也支持 Kotlin 的字符串模板（用 `$` 引用变量或表达式）。

**示例：**

```kotlin
val language = "Kotlin"
val feature = "简洁"
val textBlock = """
    $language 是一门现代编程语言，
    它最大的特点是 $feature。
    """
println(textBlock)
```

**输出：**

```
Kotlin 是一门现代编程语言，
它最大的特点是 简洁。
```

如果需要插入复杂表达式，可以用 `${}` 包裹表达式。

**示例：**

```kotlin
val num1 = 5
val num2 = 10
val textBlock = """
    两个数的和是 ${num1 + num2}。
    """
println(textBlock)
```

**输出：**

```
两个数的和是 15。
```

---

#### 5. **与普通字符串的区别**

**普通字符串：**

```kotlin
val text = "Kotlin 是一门现代编程语言，\n它简洁、类型安全且多平台支持。"
```

**文本块：**

```kotlin
val textBlock = """
    Kotlin 是一门现代编程语言，
    它简洁、类型安全且多平台支持。
    """
```

- 普通字符串需要用 `\n` 手动插入换行符，而文本块支持自然换行。
- 文本块更适合处理多行文本和需要保留格式的场景。

---

### **文本块的常用方法**

1. **`trimMargin()`**
    
    - 去除多余缩进（如前面示例所示）。
2. **`replace()`**
    
    - 替换文本块中的字符。

**示例：**

```kotlin
val textBlock = """
    Kotlin 是一种现代编程语言，
    它支持 Java。
    """.replace("Java", "多平台")
println(textBlock)
```

**输出：**

```
Kotlin 是一种现代编程语言，
它支持 多平台。
```

---

3. **`lines()`**
    - 将文本块按行分割成列表。

**示例：**

```kotlin
val textBlock = """
    Kotlin 是一种现代编程语言。
    它支持 Java。
    它适合多平台开发。
    """
val lines = textBlock.lines()
println(lines)
```

**输出：**

```
[Kotlin 是一种现代编程语言。, 它支持 Java。, 它适合多平台开发。]
```

---

4. **`toUpperCase()` / `toLowerCase()`**
    - 将文本转换为大写或小写。

**示例：**

```kotlin
val textBlock = """
    Kotlin 是一种现代编程语言。
    """
println(textBlock.toUpperCase())
println(textBlock.toLowerCase())
```

**输出：**

```
KOTLIN 是一种现代编程语言。
kotlin 是一种现代编程语言。
```

---

5. **`split()`**
    - 根据指定的分隔符分割字符串。

**示例：**

```kotlin
val textBlock = """
    Kotlin 是一种现代编程语言，支持多平台。
    """.trim()
val parts = textBlock.split("，")
println(parts)
```

**输出：**

```
[Kotlin 是一种现代编程语言, 支持多平台。]
```

---

6. **`substring()`**
    - 提取子字符串。

**示例：**

```kotlin
val textBlock = """
    Kotlin 是一种现代编程语言。
    """.trim()
println(textBlock.substring(0, 6)) // 提取前6个字符
```

**输出：**

```
Kotlin
```

---

### **文本块的应用场景**

1. **输出格式化的多行文本**
    
    - 如日志信息、模板文件等。
2. **处理 JSON、XML 或 SQL 查询**
    
    - 文本块适合书写复杂的 JSON 或 SQL 查询，因为它无需转义特殊字符。

**JSON 示例：**

```kotlin
val json = """
    {
        "name": "Kotlin",
        "type": "Programming Language",
        "features": ["Concise", "Safe", "Interoperable"]
    }
    """
println(json)
```

---

### **总结**

- **文本块** 是 Kotlin 提供的一种强大的字符串表示方式，能够处理多行、复杂、格式化的文本。
- 配合 **字符串模板**，可以动态插入变量或表达式。
- 常用方法如 `trimMargin()`、`lines()`、`replace()` 等，极大增强了文本处理的便利性。
- 在 JSON、SQL、日志等场景下非常实用。