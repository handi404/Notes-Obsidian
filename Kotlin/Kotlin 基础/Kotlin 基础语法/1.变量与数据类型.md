### **Kotlin 变量与数据类型详解**

---

#### **1. Kotlin 的变量声明**

Kotlin 中变量可以通过两种关键字声明：

- **`val`**：不可变变量（类似 Java 的 `final`）。
- **`var`**：可变变量。

```kotlin
fun main() {
    val name: String = "Kotlin"  // 不可变变量，赋值后不能更改
    var age: Int = 25           // 可变变量，可以修改值

    println("Name: $name, Age: $age")

    // 修改变量
    age = 26
    println("Updated Age: $age")
}
```

#### **总结：`val` vs `var`**

- 使用 **`val`** 时，值一旦初始化就不能再更改，推荐默认使用 `val`。
- 只有需要变更值时，才使用 **`var`**。

---

#### **2. Kotlin 的数据类型**

Kotlin 是强类型语言，支持多种数据类型，并提供类型推断功能，无需显式指定类型。

|数据类型|描述|示例|
|---|---|---|
|`Int`|整数|`val x: Int = 10`|
|`Long`|长整数（64位）|`val y: Long = 100L`|
|`Float`|单精度浮点数（32位）|`val z: Float = 3.14F`|
|`Double`|双精度浮点数（64位）|`val w: Double = 3.14159`|
|`Char`|单个字符|`val c: Char = 'A'`|
|`String`|字符串|`val s: String = "Hello"`|
|`Boolean`|布尔值（`true/false`）|`val isActive: Boolean = true`|

---

#### **3. 类型推断**

Kotlin 可以根据赋值内容推断类型，因此可以省略类型声明：

```kotlin
fun main() {
    val number = 42          // 自动推断为 Int
    val pi = 3.14            // 自动推断为 Double
    val isKotlinFun = true   // 自动推断为 Boolean

    println("Number: $number, Pi: $pi, Kotlin is Fun: $isKotlinFun")
}
```

---

#### **4. 字符串和字符串插值**

- 字符串使用双引号 `""` 表示。
- 使用 **字符串插值** 拼接变量，格式为 `$变量名` 或 `${表达式}`。

```kotlin
fun main() {
    val name = "Alice"
    val age = 25

    // 字符串插值
    println("Name: $name, Age: $age")
    println("Next year, ${name.toUpperCase()} will be ${age + 1} years old.")
}
```

---

#### **5. 类型转换**

Kotlin 不支持隐式类型转换，需要手动调用转换方法。

| 转换方法         | 描述           |
| ------------ | ------------ |
| `toInt()`    | 转换为 `Int`    |
| `toLong()`   | 转换为 `Long`   |
| `toFloat()`  | 转换为 `Float`  |
| `toDouble()` | 转换为 `Double` |
| `toString()` | 转换为 `String` |

```kotlin
fun main() {
    val num: Int = 10
    val pi: Double = 3.14

    val numToString = num.toString()
    val piToInt = pi.toInt()

    println("String: $numToString, Int: $piToInt")
}
```

---

#### **6. 空安全**

Kotlin 引入了空安全机制，防止空指针异常（NullPointerException，简称 NPE）。

- **可为空类型**：在类型后加 `?`，表示变量可以为空。
- 使用 **安全调用操作符 `?.`** 来访问可为空变量。

```kotlin
fun main() {
    val name: String? = null  // 可为空
    println(name?.length)     // 安全调用，避免崩溃

    val defaultName = name ?: "Default Name" // Elvis 操作符提供默认值
    println(defaultName)
}
```

---

#### **7. 常量声明**

使用 `const val` 声明编译时常量。必须在顶层或伴生对象中声明。

```kotlin
const val PI = 3.14

fun main() {
    println("Value of PI: $PI")
}
```

---

### **练习题**

1. 使用 `val` 和 `var` 分别定义变量，尝试修改值，理解它们的区别。
2. 声明一个可为空的 `String`，尝试使用安全调用操作符 `?.` 和 Elvis 操作符 `?:`。
3. 编写一个小程序，计算两个数字的和并输出结果。

完成后，欢迎随时反馈或提问！ 😊