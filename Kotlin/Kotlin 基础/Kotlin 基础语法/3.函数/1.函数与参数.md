### **Kotlin 函数与参数详解**

---

### **1. Kotlin 函数的定义**

Kotlin 的函数使用关键字 **`fun`** 定义。基本语法如下：

```kotlin
fun functionName(parameters): ReturnType {
    // 函数体
}
```

##### **示例：定义一个简单函数**

```kotlin
fun sayHello() {
    println("Hello, Kotlin!")
}

fun main() {
    sayHello()  // 调用函数
}
```

---

### **2. 带参数的函数**

#### **2.1 定义和调用带参数的函数**

参数由名称和类型组成，多个参数用逗号分隔。

```kotlin
fun greet(name: String) {
    println("Hello, $name!")
}

fun main() {
    greet("Alice")  // 输出: Hello, Alice!
}
```

#### **2.2 多个参数的函数**

```kotlin
fun add(a: Int, b: Int): Int {
    return a + b
}

fun main() {
    val sum = add(5, 3)
    println("Sum: $sum")  // 输出: Sum: 8
}
```

---

### **3. 函数的返回值**

#### **3.1 指定返回类型**

Kotlin 的函数返回值类型必须显式声明，除非函数是 `Unit` 类型（类似于 Java 的 `void`）。

```kotlin
fun square(number: Int): Int {
    return number * number
}

fun main() {
    val result = square(4)
    println("Square: $result")  // 输出: Square: 16
}
```

#### **3.2 `Unit` 返回类型**

如果函数没有返回值（类似 Java 的 `void`），可以省略 `Unit`，也可以显式写出。

```kotlin
fun printMessage(message: String): Unit {
    println(message)
}

fun main() {
    printMessage("Kotlin is fun!")  // 输出: Kotlin is fun!
}
```

---

### **4. 单表达式函数**

如果函数体只有一个表达式，可以用简洁的写法，省略大括号和 `return`。

```kotlin
fun multiply(a: Int, b: Int) = a * b

fun main() {
    val result = multiply(3, 4)
    println("Result: $result")  // 输出: Result: 12
}
```

---

### **5. 默认参数**

Kotlin 支持为函数的参数设置默认值，调用时可以省略对应参数。

```kotlin
fun greet(name: String = "Guest") {
    println("Hello, $name!")
}

fun main() {
    greet()           // 输出: Hello, Guest!
    greet("Alice")    // 输出: Hello, Alice!
}
```

---

### **6. 命名参数**

调用函数时，可以通过 **参数名称** 指定参数，避免记错顺序。

```kotlin
fun formatMessage(name: String, age: Int) {
    println("$name is $age years old.")
}

fun main() {
    formatMessage(age = 25, name = "Alice")  // 参数顺序可以颠倒
}
```

---

### **7. 可变数量参数（Vararg）**

Kotlin 使用 `vararg` 关键字表示可变参数（相当于 Java 的 `...`）。

```kotlin
fun sum(vararg numbers: Int): Int {
    var total = 0
    for (num in numbers) {
        total += num
    }
    return total
}

fun main() {
    val result = sum(1, 2, 3, 4, 5)
    println("Sum: $result")  // 输出: Sum: 15
}
```

---

### **8. 高阶函数**

Kotlin 支持将函数作为参数传递或返回，这些称为高阶函数。

#### **8.1 将函数作为参数**

```kotlin
fun calculate(a: Int, b: Int, operation: (Int, Int) -> Int): Int {
    return operation(a, b)
}

fun main() {
    val sum = calculate(5, 3) { x, y -> x + y }
    println("Sum: $sum")  // 输出: Sum: 8
}
```

#### **8.2 将函数作为返回值**

```kotlin
fun operation(type: String): (Int, Int) -> Int {
    return when (type) {
        "add" -> { a, b -> a + b }
        "multiply" -> { a, b -> a * b }
        else -> { _, _ -> 0 }
    }
}

fun main() {
    val addOperation = operation("add")
    println("Result: ${addOperation(4, 2)}")  // 输出: Result: 6
}
```

---

### **9. 内联函数（Inline Functions）**

为了优化性能，高阶函数可以声明为内联函数，减少函数调用开销。

```kotlin
inline fun inlineFunction(block: () -> Unit) {
    println("Before block")
    block()
    println("After block")
}

fun main() {
    inlineFunction { println("Inside block") }
    // 输出:
    // Before block
    // Inside block
    // After block
}
```

---

### **10. 匿名函数**

除了 Lambda 表达式，还可以使用匿名函数（`fun`）。

```kotlin
val anonymousFunction = fun(x: Int, y: Int): Int {
    return x + y
}

fun main() {
    println("Result: ${anonymousFunction(3, 4)}")  // 输出: Result: 7
}
```

---

### **练习题**

1. 编写一个函数，计算两个数字的最大值，并使用它来比较多个数值。
2. 实现一个支持默认参数的函数，用于格式化日期，例如：`formatDate("2024-12-25", "YYYY-MM-DD")`。
3. 创建一个可变参数函数，求一组数字的平均值。
4. 编写一个高阶函数，传入两个数值和一个操作符（`+`, `-`, `*`, `/`），返回计算结果。

完成后如果有问题，可以随时与我讨论！ 😊