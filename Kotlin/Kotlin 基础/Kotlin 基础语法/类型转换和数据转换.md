`as` 和 `as?` 是 **类型转换**，而 `toInt`, `toString` 等是 **数据转换**，它们在功能、用途和适用场景上有明显区别。

---

### **1. `as` / `as?`（类型转换）**

#### **核心概念**

- 用于将一个对象从一种类型**显式转换**为另一种类型。
- 转换后，仍然是原对象，只是以新的类型来操作。
- 适用于类型之间有继承关系的情况（如 `Any` 转 `String`，`Number` 转 `Int` 等）。

#### **适用场景**

- 对象本质上已经是目标类型，只是需要显式告知编译器。
- 类型检查通过，不涉及数据的值变化。

#### **示例**

```kotlin
val obj: Any = "123"
val str: String = obj as String // 类型转换为 String
```

- `as?` 在类型不匹配时返回 `null`：

```kotlin
val obj: Any = 123
val str: String? = obj as? String // 类型不匹配，返回 null
```

#### **局限性**

- 如果对象本质上不是目标类型，类型转换会失败（抛异常或返回 `null`）。

---

### **2. `toInt`, `toString`, `toDouble` 等（数据转换）**

#### **核心概念**

- 用于将一个对象的**值**转换为目标类型的**数据表示**。
- 转换后是新的对象（不是原对象的引用）。
- 数据转换和类型转换无直接关系。

#### **适用场景**

- 需要将数据从一种形式转换为另一种形式（如字符串转整数、浮点数转整数等）。

#### **示例**

- 将字符串转换为整数：

```kotlin
val str = "123"
val num = str.toInt() // 数据转换为 Int
println(num) // 输出: 123
```

- 将整数转换为字符串：

```kotlin
val num = 123
val str = num.toString() // 数据转换为 String
println(str) // 输出: "123"
```

#### **局限性**

- 如果转换不合法（如非数字字符串转整数），会抛异常：

```kotlin
val str = "abc"
val num = str.toInt() // 抛出 NumberFormatException
```

---

### **3. 区别总结**

#### **本质区别**
[[改变对象的类型（视图）与对象的值（内容）]]

|特性|`as` / `as?` （类型转换）|`toInt`, `toString` 等（数据转换）|
|---|---|---|
|**目标**|改变对象的类型（视图）|改变对象的值（内容）|
|**是否创建新对象**|不创建新对象，只是改变视图|创建一个新对象（数据值已改变）|
|**适用场景**|对象本质上已经是目标类型，只需显式声明|对象本质不同，需将数据转换为目标类型的数据表示|
|**运行结果**|如果类型不匹配，抛出异常或返回 `null`|如果转换不合法，抛出异常|

---

#### **行为示例**

- **类型转换：`as` / `as?`**
    
    ```kotlin
    val obj: Any = "Hello"
    val str: String = obj as String // 类型转换成功
    println(str.uppercase()) // 输出: HELLO
    ```
    
    如果类型不匹配，使用 `as?`：
    
    ```kotlin
    val obj: Any = 123
    val str: String? = obj as? String // 返回 null
    println(str) // 输出: null
    ```
    
- **数据转换：`toInt` / `toString`**
    
    ```kotlin
    val str = "42"
    val num = str.toInt() // 数据转换成功
    println(num + 8) // 输出: 50
    ```
    
    数据不合法时会抛异常：
    
    ```kotlin
    val str = "abc"
    val num = str.toInt() // 抛出 NumberFormatException
    ```
    

---

#### **继承关系的约束**

- **`as` / `as?` 限制** 类型转换只能在继承关系的类型之间使用。例如：
    
    ```kotlin
    val number: Number = 42
    val intNumber = number as Int // 成功：Number 是 Int 的父类型
    ```
    
    如果没有继承关系，`as` 无法工作。例如：
    
    ```kotlin
    val str = "123"
    val num = str as Int // 编译错误
    ```
    
- **`toInt` 无继承关系限制** 数据转换则不要求继承关系。例如：
    
    ```kotlin
    val str = "123"
    val num = str.toInt() // 成功
    ```
    

---

#### **使用建议**

- 使用 `as` / `as?`：适用于类型检查、运行时类型安全的场景。
- 使用 `toInt`, `toString`：适用于将数据从一种形式转换为另一种形式的场景。

**示例对比：**

```kotlin
// 类型转换
val obj: Any = "123"
val str: String = obj as String // 类型转换：Kotlin 视 obj 为 String
println(str) // 输出: 123

// 数据转换
val strNum = "123"
val num = strNum.toInt() // 数据转换：String 转为 Int
println(num + 1) // 输出: 124
```