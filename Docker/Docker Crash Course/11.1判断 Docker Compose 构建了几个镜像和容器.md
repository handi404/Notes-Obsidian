# 
- [[#1. 查看 `docker-compose.yml` 文件|1. 查看 `docker-compose.yml` 文件]]
- [[#2. 使用 `docker-compose config` 命令|2. 使用 `docker-compose config` 命令]]
- [[#3. 使用 `docker-compose images` 和 `docker-compose ps` 命令|3. 使用 `docker-compose images` 和 `docker-compose ps` 命令]]
- [[#4. 使用 Docker 命令检查|4. 使用 Docker 命令检查]]
- [[#实例操作|实例操作]]
- [[#总结|总结]]

要判断 Docker Compose 构建了几个镜像和容器，可以从以下几个方面进行检查和验证：

### 1. 查看 `docker-compose.yml` 文件

在 `docker-compose.yml` 文件中，每个定义在 `services` 下的服务都会对应构建一个镜像和创建一个容器。下面是一个示例文件：

```yaml
version: '3.8'

services:
  web:
    build: ./web
    ports:
      - "5000:5000"
  redis:
    image: "redis:alpine"
```

在这个文件中，定义了两个服务 `web` 和 `redis`。因此，Docker Compose 会构建一个 `web` 服务的镜像并创建一个容器，同时拉取 `redis:alpine` 镜像并创建一个容器。

### 2. 使用 `docker-compose config` 命令

这个命令可以检查 Compose 文件中的配置并验证解析后的结果。输出会显示所有服务及其配置：

```sh
docker-compose config
```

### 3. 使用 `docker-compose images` 和 `docker-compose ps` 命令

- **查看构建的镜像：**

```sh
docker-compose images
```

这个命令列出了所有由 `docker-compose` 构建的镜像。

- **查看创建的容器：**

```sh
docker-compose ps
```

这个命令列出了所有由 `docker-compose` 创建的容器及其状态。

### 4. 使用 Docker 命令检查

- **查看所有镜像：**

```sh
docker images
```

这会列出所有镜像，包括由 `docker-compose` 构建的镜像。通过镜像的 `REPOSITORY` 和 `TAG` 可以识别出是哪一个服务的镜像。

- **查看所有容器：**

```sh
docker ps -a
```

这会列出所有容器，包括由 `docker-compose` 创建的容器。通过容器的 `NAMES` 列，可以识别出是哪一个服务的容器。`NAMES` 通常会以 `目录名称_服务名称_序号` 的形式命名，例如 `myapp_web_1`。

### 实例操作

假设 `docker-compose.yml` 文件内容如下：

```yaml
version: '3.8'

services:
  web:
    build: ./web
    ports:
      - "5000:5000"
  redis:
    image: "redis:alpine"
```

执行 `docker-compose up --build` 后，可以进行以下检查：

1. **查看镜像：**

```sh
docker-compose images
```

输出示例：

```
      Container         Repository    Tag       Image Id      Size
----------------------------------------------------------------
myapp_web_1             myapp_web     latest    abcdef123456   123MB
```

2. **查看容器：**

```sh
docker-compose ps
```

输出示例：

```
       Name                 Command              State              Ports
--------------------------------------------------------------------------------
myapp_web_1      "python app.py"                 Up      0.0.0.0:5000->5000/tcp
myapp_redis_1    "docker-entrypoint.s…"          Up      6379/tcp
```

通过这些命令，可以清楚地看到 Docker Compose 构建了哪些镜像和创建了哪些容器。

### 总结

- 检查 `docker-compose.yml` 文件了解定义的服务数量。
- 使用 `docker-compose config` 验证配置。
- 使用 `docker-compose images` 查看构建的镜像。
- 使用 `docker-compose ps` 查看创建的容器。
- 使用 `docker images` 和 `docker ps -a` 查看所有 Docker 镜像和容器。

通过这些方法，您可以判断 Docker Compose 构建了几个镜像和容器，并检查其状态。